2023-12-08 00:16:15.111 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 15116 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:16:15.118 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:16:16.256 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:16:16.340 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2023-12-08 00:16:17.033 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:16:17.048 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:16:17.051 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:16:17.052 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:16:17.208 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:16:17.208 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2034 ms
2023-12-08 00:16:17.398 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:16:17.398 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:16:17.398 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:16:17.689 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:16:17.778 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.036s)
2023-12-08 00:16:17.779 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:16:17.789 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:16:17.791 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:16:17.968 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:16:18.049 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:16:18.329 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:16:18.547 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:16:18.625 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:16:18.661 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:16:19.835 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:16:19.848 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:16:20.727 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:16:21.415 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@272485a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6aed4a23, org.springframework.security.web.context.SecurityContextPersistenceFilter@74ed3be4, org.springframework.security.web.header.HeaderWriterFilter@5812935, org.springframework.web.filter.CorsFilter@40b678b3, org.springframework.security.web.authentication.logout.LogoutFilter@4a7c8cb7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@20fdaf3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41e43885, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2318651f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5f7c1de0, org.springframework.security.web.session.SessionManagementFilter@5b1cedfd, org.springframework.security.web.access.ExceptionTranslationFilter@762db992, org.springframework.security.web.access.intercept.AuthorizationFilter@4e9d203e]
2023-12-08 00:16:21.702 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:16:21.722 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:16:21.734 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.246 seconds (JVM running for 8.434)
2023-12-08 00:16:31.573 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:16:31.573 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:16:31.575 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 00:16:31.655 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:31.655 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:31.764 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:31.764 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:32.632 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:32.632 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:32.643 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:32.651 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:33.741 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:33.753 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:36.809 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:36.825 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:40.088 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:40.106 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:42.629 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:42.651 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:43.285 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:43.285 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:16:43.292 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:16:43.296 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:17:57.510 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:17:57.541 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:17:57.554 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:18:08.003 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 18096 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:18:08.005 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:18:08.937 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:18:09.028 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78 ms. Found 4 JPA repository interfaces.
2023-12-08 00:18:09.789 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:18:09.798 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:18:09.800 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:18:09.800 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:18:09.934 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:18:09.935 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1883 ms
2023-12-08 00:18:10.360 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:18:10.360 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:18:10.361 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:18:10.742 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:18:10.789 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.020s)
2023-12-08 00:18:10.789 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:18:10.800 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:18:10.802 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:18:11.048 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:18:11.219 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:18:11.614 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:18:11.762 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:18:11.870 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:18:11.926 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:18:13.601 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:18:13.625 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:18:15.250 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:18:16.394 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33d2f9d3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@677d4cea, org.springframework.security.web.context.SecurityContextPersistenceFilter@7af7c9aa, org.springframework.security.web.header.HeaderWriterFilter@7307ae6, org.springframework.web.filter.CorsFilter@55ff64fd, org.springframework.security.web.authentication.logout.LogoutFilter@43414b88, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@c7b100b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3ec52163, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74ed3be4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20fdaf3e, org.springframework.security.web.session.SessionManagementFilter@6447dc25, org.springframework.security.web.access.ExceptionTranslationFilter@74070994, org.springframework.security.web.access.intercept.AuthorizationFilter@4f836d9]
2023-12-08 00:18:16.795 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:18:16.833 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:18:16.871 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 9.435 seconds (JVM running for 10.298)
2023-12-08 00:18:17.295 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:18:17.295 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:18:17.298 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 00:18:17.436 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:18:17.436 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:18:17.567 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:18:17.567 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:18:20.036 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:18:20.046 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:18:23.411 [http-nio-8080-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 00:18:23.412 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(5) всё ещё есть ссылки в таблице "comment".
2023-12-08 00:18:23.416 [http-nio-8080-exec-6] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 00:18:23.436 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(5) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 00:18:23.526 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:18:23.540 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:18:33.593 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:18:33.615 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:19:47.484 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:19:47.518 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:19:47.534 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:19:54.392 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 11232 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:19:54.395 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:19:55.400 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:19:55.525 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 104 ms. Found 4 JPA repository interfaces.
2023-12-08 00:19:56.326 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:19:56.337 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:19:56.339 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:19:56.339 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:19:56.491 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:19:56.491 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2040 ms
2023-12-08 00:19:56.723 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:19:56.723 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:19:56.724 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:19:57.003 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:19:57.062 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.024s)
2023-12-08 00:19:57.063 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:19:57.072 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:19:57.075 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:19:57.248 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:19:57.332 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:19:57.626 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:19:57.778 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:19:57.855 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:19:57.895 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:19:58.784 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:19:58.794 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:19:59.751 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:20:00.605 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77b01226, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@386ea60f, org.springframework.security.web.context.SecurityContextPersistenceFilter@2932721e, org.springframework.security.web.header.HeaderWriterFilter@563bd6a4, org.springframework.web.filter.CorsFilter@c7b100b, org.springframework.security.web.authentication.logout.LogoutFilter@3c5cb013, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1bca9b64, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6447dc25, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@208b8425, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@99774ec, org.springframework.security.web.session.SessionManagementFilter@71e9640, org.springframework.security.web.access.ExceptionTranslationFilter@3cc548f6, org.springframework.security.web.access.intercept.AuthorizationFilter@6d2f910b]
2023-12-08 00:20:01.078 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:20:01.106 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:20:01.122 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.255 seconds (JVM running for 8.319)
2023-12-08 00:20:09.877 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:20:09.878 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:20:09.879 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 00:20:09.942 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:10.019 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:10.875 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:10.876 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:10.890 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:10.892 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:13.553 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:13.570 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:15.956 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:15.969 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:19.412 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:19.430 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:20.080 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:20.081 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:20:20.094 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:20:20.095 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:18.764 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:22:18.814 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:22:18.840 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:22:27.701 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 18140 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:22:27.704 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:22:28.593 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:22:28.677 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2023-12-08 00:22:29.355 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:22:29.368 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:22:29.373 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:22:29.373 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:22:29.571 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:22:29.572 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1808 ms
2023-12-08 00:22:29.775 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:22:29.775 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:22:29.775 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:22:30.023 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:22:30.087 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.023s)
2023-12-08 00:22:30.087 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:22:30.096 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:22:30.098 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:22:30.241 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:22:30.320 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:22:30.572 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:22:30.745 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:22:30.818 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:22:30.854 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:22:31.845 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:22:31.856 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:22:32.747 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:22:33.398 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@492d38a2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fc2e100, org.springframework.security.web.context.SecurityContextPersistenceFilter@401d83ce, org.springframework.security.web.header.HeaderWriterFilter@4197e859, org.springframework.web.filter.CorsFilter@31885b4b, org.springframework.security.web.authentication.logout.LogoutFilter@325a781c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6f53295e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5abc488d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47629063, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@638e8194, org.springframework.security.web.session.SessionManagementFilter@65a3d7c9, org.springframework.security.web.access.ExceptionTranslationFilter@8961e55, org.springframework.security.web.access.intercept.AuthorizationFilter@f31b991]
2023-12-08 00:22:33.676 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:22:33.700 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:22:33.713 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.559 seconds (JVM running for 7.43)
2023-12-08 00:22:38.795 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:22:38.795 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:22:38.798 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 00:22:38.942 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:38.942 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:39.064 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:39.064 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:40.043 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:40.043 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:40.053 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:40.058 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:42.597 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:42.620 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:45.608 [http-nio-8080-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 00:22:45.609 [http-nio-8080-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
2023-12-08 00:22:45.612 [http-nio-8080-exec-3] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 00:22:45.628 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 00:22:45.704 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:45.720 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:48.630 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:48.649 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:49.424 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:49.455 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:49.456 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:49.469 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:54.445 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:54.498 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:22:58.399 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:22:58.406 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:01.043 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:25:01.073 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:25:01.103 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:25:08.980 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 17604 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:25:08.984 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:25:09.992 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:25:10.093 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 4 JPA repository interfaces.
2023-12-08 00:25:10.712 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:25:10.720 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:25:10.722 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:25:10.722 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:25:10.845 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:25:10.846 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1789 ms
2023-12-08 00:25:11.043 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:25:11.044 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:25:11.044 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:25:11.382 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:25:11.473 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.036s)
2023-12-08 00:25:11.473 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:25:11.490 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:25:11.493 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:25:11.720 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:25:11.843 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:25:12.103 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:25:12.248 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:25:12.329 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:25:12.364 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:25:13.506 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:25:13.528 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:25:14.477 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:25:15.194 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e4c0bc7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@36570936, org.springframework.security.web.context.SecurityContextPersistenceFilter@14af57c3, org.springframework.security.web.header.HeaderWriterFilter@7866fe3e, org.springframework.web.filter.CorsFilter@775fec4, org.springframework.security.web.authentication.logout.LogoutFilter@703947bd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6b247ef6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2aeb3f3b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62b0792, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@c7d173f, org.springframework.security.web.session.SessionManagementFilter@7fa2473a, org.springframework.security.web.access.ExceptionTranslationFilter@593e594f, org.springframework.security.web.access.intercept.AuthorizationFilter@65871cfd]
2023-12-08 00:25:15.465 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:25:15.487 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:25:15.500 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.065 seconds (JVM running for 7.899)
2023-12-08 00:25:23.086 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:25:23.086 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:25:23.090 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 00:25:24.684 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:24.765 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:27.301 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:27.316 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:32.150 [http-nio-8080-exec-10] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 00:25:32.150 [http-nio-8080-exec-10] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
2023-12-08 00:25:32.156 [http-nio-8080-exec-10] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 00:25:32.171 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 00:25:32.229 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:32.246 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:34.337 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:34.356 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:35.083 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:35.083 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:35.104 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:35.105 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:39.941 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:39.958 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:25:43.165 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:25:43.174 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:27:31.360 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:27:31.407 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:27:31.431 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:27:39.874 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23736 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:27:39.878 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:27:40.818 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:27:40.908 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 4 JPA repository interfaces.
2023-12-08 00:27:41.572 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:27:41.583 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:27:41.585 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:27:41.585 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:27:41.704 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:27:41.705 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1735 ms
2023-12-08 00:27:41.911 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:27:41.911 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:27:41.911 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:27:42.202 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:27:42.237 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 00:27:42.238 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:27:42.245 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:27:42.248 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:27:42.404 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:27:42.497 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:27:42.703 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:27:42.833 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:27:42.914 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:27:42.954 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:27:43.922 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:27:43.933 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:27:44.816 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:27:45.446 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@76876421, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@c3836b6, org.springframework.security.web.context.SecurityContextPersistenceFilter@1f207142, org.springframework.security.web.header.HeaderWriterFilter@113e6e06, org.springframework.web.filter.CorsFilter@60317de8, org.springframework.security.web.authentication.logout.LogoutFilter@4bba2704, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18f794e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@723f8990, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@742aa00a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@363e2009, org.springframework.security.web.session.SessionManagementFilter@69c263f8, org.springframework.security.web.access.ExceptionTranslationFilter@1d7f0cd0, org.springframework.security.web.access.intercept.AuthorizationFilter@178c4480]
2023-12-08 00:27:45.714 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:27:45.735 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:27:45.746 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.546 seconds (JVM running for 7.554)
2023-12-08 00:27:53.509 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:27:53.510 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:27:53.514 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2023-12-08 00:27:55.142 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:27:55.180 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:27:56.345 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:27:56.367 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:28:00.778 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 00:28:00.779 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
2023-12-08 00:28:00.781 [http-nio-8080-exec-2] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 00:28:00.791 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 00:28:00.867 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:28:00.889 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:28:03.780 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:28:03.804 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:28:04.498 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:28:04.499 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:28:04.507 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:28:04.510 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:29:08.313 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:29:08.318 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:29:08.327 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:29:16.663 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 3216 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:29:16.665 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:29:17.692 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:29:17.774 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2023-12-08 00:29:18.439 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:29:18.448 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:29:18.451 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:29:18.451 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:29:18.587 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:29:18.587 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1867 ms
2023-12-08 00:29:18.804 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:29:18.804 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:29:18.804 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:29:19.016 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:29:19.064 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.021s)
2023-12-08 00:29:19.065 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:29:19.074 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:29:19.076 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:29:19.242 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:29:19.329 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:29:19.591 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:29:19.749 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:29:19.852 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:29:19.901 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:29:20.981 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:29:20.992 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:29:21.865 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:29:22.541 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@27ea552d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a57c5d9, org.springframework.security.web.context.SecurityContextPersistenceFilter@73072745, org.springframework.security.web.header.HeaderWriterFilter@30b29f55, org.springframework.web.filter.CorsFilter@742aa00a, org.springframework.security.web.authentication.logout.LogoutFilter@13f17b8f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@65871cfd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79735611, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a1e5fa7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2be208db, org.springframework.security.web.session.SessionManagementFilter@8961e55, org.springframework.security.web.access.ExceptionTranslationFilter@399a5a52, org.springframework.security.web.access.intercept.AuthorizationFilter@212be8c]
2023-12-08 00:29:22.825 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:29:22.848 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:29:22.861 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.758 seconds (JVM running for 7.718)
2023-12-08 00:29:25.139 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:29:25.140 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:29:25.142 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 00:29:25.895 [http-nio-8080-exec-3] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [101] milliseconds.
2023-12-08 00:29:25.895 [http-nio-8080-exec-1] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [101] milliseconds.
2023-12-08 00:29:26.909 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:29:26.935 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:29:29.949 [http-nio-8080-exec-6] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 00:29:29.950 [http-nio-8080-exec-6] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
2023-12-08 00:29:29.952 [http-nio-8080-exec-6] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 00:29:29.962 [http-nio-8080-exec-6] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 00:29:30.051 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:29:30.069 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:29:32.621 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:29:32.642 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:29:33.400 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:29:33.402 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:29:33.417 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:29:33.422 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:32:13.497 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:32:13.518 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:32:13.536 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:32:22.835 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 12780 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:32:22.838 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:32:23.875 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:32:23.957 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2023-12-08 00:32:25.108 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:32:25.117 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:32:25.119 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:32:25.119 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:32:25.256 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:32:25.257 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2365 ms
2023-12-08 00:32:25.449 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:32:25.449 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:32:25.450 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:32:25.777 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:32:25.822 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.015s)
2023-12-08 00:32:25.822 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:32:25.831 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:32:25.833 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:32:25.990 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:32:26.133 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:32:26.385 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:32:26.520 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:32:26.606 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:32:26.648 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:32:27.710 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:32:27.722 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:32:28.711 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:32:29.547 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7307ae6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49c555c3, org.springframework.security.web.context.SecurityContextPersistenceFilter@41736818, org.springframework.security.web.header.HeaderWriterFilter@96448ee, org.springframework.web.filter.CorsFilter@542aec6, org.springframework.security.web.authentication.logout.LogoutFilter@6d387e9b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@235dacd7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@144792d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@439d649c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@724e0a77, org.springframework.security.web.session.SessionManagementFilter@1fe37d27, org.springframework.security.web.access.ExceptionTranslationFilter@6164b3a2, org.springframework.security.web.access.intercept.AuthorizationFilter@33997e07]
2023-12-08 00:32:29.907 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:32:29.947 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:32:29.977 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.733 seconds (JVM running for 8.913)
2023-12-08 00:34:39.781 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:34:39.806 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:34:39.820 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:36:20.992 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 25024 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:36:20.995 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:36:21.901 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:36:21.987 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2023-12-08 00:36:22.700 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:36:22.709 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:36:22.711 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:36:22.711 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:36:22.947 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:36:22.948 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1884 ms
2023-12-08 00:36:23.136 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:36:23.136 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:36:23.136 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:36:23.595 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:36:23.666 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.019s)
2023-12-08 00:36:23.666 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:36:23.711 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 00:36:23.818 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:36:23.820 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:36:23.976 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:36:24.081 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:36:24.346 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:36:24.516 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:36:24.603 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:36:24.645 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:36:25.511 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 00:36:25.511 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 00:36:25.548 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:36:25.571 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:36:26.463 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:36:27.105 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5687ade6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7621c3f7, org.springframework.security.web.context.SecurityContextPersistenceFilter@74070994, org.springframework.security.web.header.HeaderWriterFilter@613ba54e, org.springframework.web.filter.CorsFilter@519a81dd, org.springframework.security.web.authentication.logout.LogoutFilter@3e3a07ab, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1f57fa23, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7307ae6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@762db992, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5608e254, org.springframework.security.web.session.SessionManagementFilter@563bd6a4, org.springframework.security.web.access.ExceptionTranslationFilter@1028a747, org.springframework.security.web.access.intercept.AuthorizationFilter@126e2710]
2023-12-08 00:36:27.411 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:36:27.432 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:36:27.444 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.176 seconds (JVM running for 9.325)
2023-12-08 00:36:36.004 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:36:36.004 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:36:36.006 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 00:36:52.994 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 00:36:53.179 [http-nio-8080-exec-5] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 00:37:19.898 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 00:37:19.914 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 00:37:21.766 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:37:21.789 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:37:24.731 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:37:24.742 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:37:25.685 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:37:25.709 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:37:29.084 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:37:29.095 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:37:48.865 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:37:48.906 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:38:03.595 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:38:03.632 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:38:07.438 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:38:07.449 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:38:19.832 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:38:19.867 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:38:24.317 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:38:24.326 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:38:25.266 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:38:25.275 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:56:29.146 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:56:29.233 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:56:29.291 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:56:39.579 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 14372 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:56:39.581 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:56:40.496 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:56:40.595 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77 ms. Found 4 JPA repository interfaces.
2023-12-08 00:56:41.341 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:56:41.351 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:56:41.354 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:56:41.354 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:56:41.479 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:56:41.480 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1850 ms
2023-12-08 00:56:41.678 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:56:41.679 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:56:41.679 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:56:41.941 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:56:42.018 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.026s)
2023-12-08 00:56:42.019 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:56:42.028 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:56:42.030 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:56:42.179 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:56:42.251 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:56:42.469 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:56:42.661 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:56:42.735 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:56:42.771 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:56:43.720 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:56:43.735 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:56:44.092 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
2023-12-08 00:56:44.092 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:56:44.093 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:56:44.096 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:56:44.097 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 00:56:44.111 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 00:56:44.132 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 33 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:107)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:95)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1061)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1921)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:97)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:87)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:87)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:365)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:323)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:231)
	at org.springframework.data.util.Lazy.get(Lazy.java:115)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:329)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 44 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:96)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:119)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:259)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:93)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:103)
	... 66 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:91)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:438)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:414)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:448)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:471)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:414)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:367)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:349)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:250)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1006)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:251)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:384)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1006)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:385)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:96)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:89)
	... 70 common frames omitted
2023-12-08 00:58:05.875 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 25000 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:58:05.878 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:58:06.912 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:58:07.005 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 82 ms. Found 4 JPA repository interfaces.
2023-12-08 00:58:07.714 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:58:07.724 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:58:07.725 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:58:07.725 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:58:07.857 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:58:07.858 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1928 ms
2023-12-08 00:58:08.034 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:58:08.034 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:58:08.034 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:58:08.260 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:58:08.340 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.029s)
2023-12-08 00:58:08.341 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:58:08.359 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:58:08.363 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:58:08.549 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:58:08.634 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:58:08.883 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:58:09.005 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:58:09.077 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:58:09.121 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:58:10.180 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:58:10.201 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:58:10.704 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
2023-12-08 00:58:10.704 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:58:10.705 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 00:58:10.707 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 00:58:10.709 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 00:58:10.723 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 00:58:10.743 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adRepository' defined in ru.skypro.homework.repository.AdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 33 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer); Reason: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:107)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:95)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1061)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1921)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:97)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:87)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:87)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:365)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:323)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:231)
	at org.springframework.data.util.Lazy.get(Lazy.java:115)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:329)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 44 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract void ru.skypro.homework.repository.AdRepository.deleteAllByPkId(java.lang.Integer)! No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:96)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:119)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:259)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:93)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:103)
	... 66 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'id' found for type 'Integer'; Traversed path: Ad.pk
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:91)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:438)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:414)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:448)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:471)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:414)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:367)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:349)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:250)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1006)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:251)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:384)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1006)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:385)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:96)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:89)
	... 70 common frames omitted
2023-12-08 00:59:34.964 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 22652 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 00:59:34.966 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 00:59:35.740 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 00:59:35.817 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 4 JPA repository interfaces.
2023-12-08 00:59:36.406 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 00:59:36.414 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 00:59:36.416 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 00:59:36.416 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 00:59:36.528 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 00:59:36.529 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1503 ms
2023-12-08 00:59:36.695 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 00:59:36.695 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 00:59:36.695 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 00:59:36.854 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 00:59:36.888 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 00:59:36.889 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 00:59:36.897 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 00:59:36.899 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 00:59:37.019 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 00:59:37.066 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 00:59:37.238 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 00:59:37.407 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 00:59:37.475 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 00:59:37.506 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 00:59:38.230 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 00:59:38.240 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 00:59:39.172 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 00:59:39.825 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@235dacd7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74070994, org.springframework.security.web.context.SecurityContextPersistenceFilter@1fe37d27, org.springframework.security.web.header.HeaderWriterFilter@4e53c6ef, org.springframework.web.filter.CorsFilter@7c816f46, org.springframework.security.web.authentication.logout.LogoutFilter@1e487d57, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3fed0c04, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6bfc5296, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1da61a29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7307ae6, org.springframework.security.web.session.SessionManagementFilter@6c6c93f8, org.springframework.security.web.access.ExceptionTranslationFilter@3f1d4ecf, org.springframework.security.web.access.intercept.AuthorizationFilter@69e736bf]
2023-12-08 00:59:40.115 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 00:59:40.136 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 00:59:40.148 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.664 seconds (JVM running for 6.457)
2023-12-08 00:59:51.536 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 00:59:51.537 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 00:59:51.539 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 00:59:51.624 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:59:51.732 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:59:52.712 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:59:52.721 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:59:56.080 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 00:59:56.090 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 00:59:58.731 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call] with root cause
javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:299)
	at jdk.proxy2/jdk.proxy2.$Proxy128.remove(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$DeleteExecution.doExecute(JpaQueryExecution.java:277)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteCommentByAd_PkAndId(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:102)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 01:00:02.648 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 01:00:02.659 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 01:00:09.223 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 01:00:09.236 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 01:00:42.630 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 01:00:42.636 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 01:00:42.643 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:03:07.353 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 19268 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:03:07.358 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:03:08.724 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:03:08.819 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 4 JPA repository interfaces.
2023-12-08 10:03:09.528 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:03:09.540 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:03:09.541 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:03:09.542 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:03:09.686 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:03:09.687 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2244 ms
2023-12-08 10:03:09.901 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:03:09.901 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:03:09.901 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:03:10.110 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:03:10.177 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.026s)
2023-12-08 10:03:10.177 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:03:10.187 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:03:10.189 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:03:10.315 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:03:10.425 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:03:10.650 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:03:10.775 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:03:10.851 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:03:10.893 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:03:11.859 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:03:11.871 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:03:12.752 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:03:13.441 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533a27f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7dd847a2, org.springframework.security.web.context.SecurityContextPersistenceFilter@7568134c, org.springframework.security.web.header.HeaderWriterFilter@2eb73a42, org.springframework.web.filter.CorsFilter@75b25ec3, org.springframework.security.web.authentication.logout.LogoutFilter@1da61a29, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6d387e9b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35217e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3dd27116, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69e736bf, org.springframework.security.web.session.SessionManagementFilter@1828ab51, org.springframework.security.web.access.ExceptionTranslationFilter@73753326, org.springframework.security.web.access.intercept.AuthorizationFilter@2433bcd4]
2023-12-08 10:03:13.822 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:03:13.851 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:03:13.866 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.195 seconds (JVM running for 8.49)
2023-12-08 10:03:25.143 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:03:25.143 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:03:25.145 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 10:03:25.214 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:03:25.290 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:03:26.141 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:03:26.151 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:03:29.478 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:03:29.492 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:03:31.754 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call] with root cause
javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'remove' call
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:299)
	at jdk.proxy2/jdk.proxy2.$Proxy128.remove(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$DeleteExecution.doExecute(JpaQueryExecution.java:277)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteCommentByAd_PkAndId(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:102)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:03:37.450 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:03:37.457 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:13:22.117 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:13:22.156 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:13:22.174 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:13:28.357 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 12204 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:13:28.361 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:13:29.423 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:13:29.514 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 79 ms. Found 4 JPA repository interfaces.
2023-12-08 10:13:30.190 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:13:30.199 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:13:30.201 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:13:30.201 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:13:30.329 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:13:30.329 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1908 ms
2023-12-08 10:13:30.560 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:13:30.560 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:13:30.560 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:13:30.816 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:13:30.886 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.024s)
2023-12-08 10:13:30.886 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:13:30.896 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:13:30.898 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:13:31.094 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:13:31.168 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:13:31.402 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:13:31.528 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:13:31.629 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:13:31.673 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:13:32.596 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:13:32.607 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:13:33.475 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:13:34.156 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1ee126de, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22cce199, org.springframework.security.web.context.SecurityContextPersistenceFilter@59509393, org.springframework.security.web.header.HeaderWriterFilter@35217e0, org.springframework.web.filter.CorsFilter@14b4b25e, org.springframework.security.web.authentication.logout.LogoutFilter@c7cbc2d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@613ba54e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ec75228, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3fc7abf6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4babe06f, org.springframework.security.web.session.SessionManagementFilter@6164b3a2, org.springframework.security.web.access.ExceptionTranslationFilter@7568134c, org.springframework.security.web.access.intercept.AuthorizationFilter@6bd8c398]
2023-12-08 10:13:34.478 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:13:34.501 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:13:34.515 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.776 seconds (JVM running for 7.751)
2023-12-08 10:13:43.259 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:13:43.259 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:13:43.260 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 10:13:43.342 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:13:43.402 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:13:44.175 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:13:44.182 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:13:48.132 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:13:48.144 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:13:50.029 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:13:50.029 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(1) всё ещё есть ссылки в таблице "comment".
2023-12-08 10:13:50.031 [http-nio-8080-exec-7] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:13:50.042 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(1) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:13:52.132 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:13:52.138 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:13:57.783 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:13:57.802 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:14:01.639 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:14:01.648 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:14:03.757 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:14:03.757 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(1) всё ещё есть ссылки в таблице "comment".
2023-12-08 10:14:03.758 [http-nio-8080-exec-5] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:14:03.760 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(1) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:14:08.354 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:14:08.364 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:16:09.106 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:16:09.142 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:16:09.163 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:16:16.356 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 18936 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:16:16.360 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:16:17.392 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:16:17.496 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2023-12-08 10:16:18.191 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:16:18.206 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:16:18.209 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:16:18.211 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:16:18.360 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:16:18.361 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1936 ms
2023-12-08 10:16:18.634 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:16:18.635 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:16:18.635 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:16:19.030 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:16:19.124 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.038s)
2023-12-08 10:16:19.124 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:16:19.141 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:16:19.145 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:16:19.347 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:16:19.423 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:16:19.694 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:16:19.850 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:16:19.944 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:16:19.993 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:16:21.444 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:16:21.468 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:16:22.528 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:16:23.249 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6e627ab8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@cce672c, org.springframework.security.web.context.SecurityContextPersistenceFilter@1677f98b, org.springframework.security.web.header.HeaderWriterFilter@524418a2, org.springframework.web.filter.CorsFilter@496004e3, org.springframework.security.web.authentication.logout.LogoutFilter@1c76b2fe, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@113e6e06, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3eadfbbb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@951461a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@df34b01, org.springframework.security.web.session.SessionManagementFilter@7f1b2f07, org.springframework.security.web.access.ExceptionTranslationFilter@3b7dd173, org.springframework.security.web.access.intercept.AuthorizationFilter@75caecf7]
2023-12-08 10:16:23.550 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:16:23.587 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:16:23.600 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 8.005 seconds (JVM running for 9.168)
2023-12-08 10:16:34.556 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:16:34.558 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:16:34.559 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 10:16:34.639 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:16:34.718 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:16:35.507 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:16:35.513 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:16:38.415 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:16:38.431 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:19:47.059 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:19:47.104 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:19:47.136 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:20:36.448 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 17372 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:20:36.452 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:20:37.370 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:20:37.456 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 4 JPA repository interfaces.
2023-12-08 10:20:38.126 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:20:38.135 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:20:38.137 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:20:38.137 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:20:38.261 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:20:38.261 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1737 ms
2023-12-08 10:20:38.482 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:20:38.482 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:20:38.482 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:20:38.731 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:20:38.775 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.010s)
2023-12-08 10:20:38.775 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:20:38.810 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 10:20:38.928 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:20:38.931 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:20:39.184 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:20:39.268 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:20:39.494 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:20:39.637 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:20:39.727 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:20:39.777 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:20:41.080 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 10:20:41.080 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 10:20:41.120 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:20:41.144 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:20:42.116 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:20:42.759 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b3e4253, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@13b5598b, org.springframework.security.web.context.SecurityContextPersistenceFilter@46bff388, org.springframework.security.web.header.HeaderWriterFilter@212be8c, org.springframework.web.filter.CorsFilter@141c66db, org.springframework.security.web.authentication.logout.LogoutFilter@775fec4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@395c21ee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b3da23f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f207142, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@18f794e, org.springframework.security.web.session.SessionManagementFilter@df34b01, org.springframework.security.web.access.ExceptionTranslationFilter@47800bd7, org.springframework.security.web.access.intercept.AuthorizationFilter@3ef04239]
2023-12-08 10:20:43.063 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:20:43.085 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:20:43.099 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.357 seconds (JVM running for 8.237)
2023-12-08 10:20:56.232 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:20:56.232 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:20:56.234 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 10:20:56.388 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 10:20:56.543 [http-nio-8080-exec-5] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 10:21:22.033 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 10:21:22.043 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 10:21:23.344 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:21:23.361 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:21:29.795 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:21:29.815 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:21:31.401 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:21:31.418 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:21:31.951 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:21:31.962 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:22:27.072 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:22:27.074 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:22:27.078 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:22:44.138 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23180 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:22:44.141 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:22:45.121 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:22:45.201 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2023-12-08 10:22:45.889 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:22:45.921 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:22:45.925 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:22:45.925 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:22:46.166 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:22:46.166 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1962 ms
2023-12-08 10:22:46.364 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:22:46.365 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:22:46.365 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:22:46.626 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:22:46.676 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.020s)
2023-12-08 10:22:46.676 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:22:46.685 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:22:46.687 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:22:46.819 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:22:46.911 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:22:47.104 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:22:47.230 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:22:47.298 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:22:47.331 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:22:48.223 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:22:48.233 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:22:49.074 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:22:49.761 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30cb489a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@401d83ce, org.springframework.security.web.context.SecurityContextPersistenceFilter@78e34499, org.springframework.security.web.header.HeaderWriterFilter@33a58fcb, org.springframework.web.filter.CorsFilter@3b7b099b, org.springframework.security.web.authentication.logout.LogoutFilter@202fd4c4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2a7b4bb6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6771efaa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2c750b69, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5abc488d, org.springframework.security.web.session.SessionManagementFilter@743b7025, org.springframework.security.web.access.ExceptionTranslationFilter@44181746, org.springframework.security.web.access.intercept.AuthorizationFilter@7c9c7e7d]
2023-12-08 10:22:50.087 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:22:50.114 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:22:50.130 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.613 seconds (JVM running for 7.72)
2023-12-08 10:24:29.911 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:24:29.912 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:24:29.913 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 10:24:29.984 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:24:30.069 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:27:15.736 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:27:15.794 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:27:15.846 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:35:44.179 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23132 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:35:44.187 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:35:47.194 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:35:47.453 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 226 ms. Found 4 JPA repository interfaces.
2023-12-08 10:35:49.281 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:35:49.314 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:35:49.319 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:35:49.320 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:35:49.755 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:35:49.756 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5434 ms
2023-12-08 10:35:50.339 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:35:50.340 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:35:50.340 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:35:51.032 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:35:51.130 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.028s)
2023-12-08 10:35:51.131 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:35:51.201 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 10:35:51.357 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:35:51.361 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:35:51.692 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:35:51.864 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:35:52.486 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:35:53.008 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:35:53.263 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:35:53.402 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:35:56.311 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 10:35:56.312 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 10:35:56.366 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:35:56.406 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:35:59.462 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:36:02.281 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@55849272, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2eb91767, org.springframework.security.web.context.SecurityContextPersistenceFilter@5c648e38, org.springframework.security.web.header.HeaderWriterFilter@5ff8d76f, org.springframework.web.filter.CorsFilter@520eb9f8, org.springframework.security.web.authentication.logout.LogoutFilter@4cf1bd4a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@128d397c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@395c21ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13b5598b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ecc9baa, org.springframework.security.web.session.SessionManagementFilter@5eed2edf, org.springframework.security.web.access.ExceptionTranslationFilter@1a82453, org.springframework.security.web.access.intercept.AuthorizationFilter@33d08a24]
2023-12-08 10:36:03.138 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:36:03.210 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:36:03.250 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 20.718 seconds (JVM running for 24.224)
2023-12-08 10:36:18.666 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:36:18.666 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:36:18.667 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 10:36:34.822 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 10:36:35.000 [http-nio-8080-exec-1] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 10:36:54.413 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 10:36:54.435 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 10:36:55.771 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:36:55.795 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:36:56.322 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:36:56.340 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:36:57.160 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:36:57.167 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:36:58.011 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:36:58.023 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:37:00.222 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:37:00.235 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:37:24.708 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:37:24.716 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:37:49.893 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:37:49.902 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:38:04.401 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:38:04.412 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:44:52.034 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 10:44:52.056 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 10:44:52.199 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:44:52.215 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:44:52.521 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:44:52.535 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:44:52.666 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:44:52.683 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:44:52.920 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:44:52.956 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:23.489 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:23.512 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:23.657 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:23.676 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:23.812 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:23.837 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:24.161 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:24.177 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:28.163 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:28.178 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:29.902 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:29.906 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:30.031 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:30.040 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:30.170 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:30.176 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:48.237 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:48.243 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:48.267 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 10:45:48.281 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 10:45:48.376 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:48.381 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:48.664 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:48.671 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:48.815 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:48.819 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:48.961 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:48.964 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:49.346 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:49.349 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:45:49.350 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:45:49.357 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:05.789 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.UserServiceImpl - UserServiceImpl : ->setPassword
2023-12-08 10:46:06.777 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:06.778 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:06.781 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:06.781 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:18.590 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:18.590 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:18.598 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:18.598 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:21.793 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:21.795 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:21.798 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:21.800 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:27.576 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:27.579 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:39.347 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:39.358 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:39.359 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:39.364 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:47.018 [http-nio-8080-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:46:47.018 [http-nio-8080-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 10:46:47.021 [http-nio-8080-exec-8] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:46:47.031 [http-nio-8080-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at ru.skypro.homework.service.impl.CommentServiceImpl$$EnhancerBySpringCGLIB$$9bf82b29.deleteComment(<generated>)
	at ru.skypro.homework.controller.CommentController.deleteComment(CommentController.java:149)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:46:47.048 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:47.060 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:46:56.546 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:46:56.556 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:47:20.362 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:47:20.372 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:47:29.547 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:47:29.548 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 10:47:29.548 [http-nio-8080-exec-2] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:47:29.554 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:47:29.571 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:47:29.585 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:47:31.838 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:47:31.847 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:47:32.485 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:47:32.486 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:47:32.489 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:47:32.492 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:31.470 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:31.470 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:31.474 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:31.476 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:33.905 [http-nio-8080-exec-9] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:48:33.905 [http-nio-8080-exec-9] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 10:48:33.906 [http-nio-8080-exec-9] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:48:33.907 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:48:33.924 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:33.933 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:35.847 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:35.854 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:36.513 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:36.514 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:48:36.518 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:48:36.518 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:09.430 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:50:09.452 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:50:09.471 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 10:50:13.236 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 22128 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 10:50:13.238 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 10:50:14.054 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 10:50:14.134 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2023-12-08 10:50:14.703 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 10:50:14.713 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 10:50:14.715 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 10:50:14.715 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 10:50:14.819 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 10:50:14.819 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1516 ms
2023-12-08 10:50:15.000 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 10:50:15.000 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 10:50:15.000 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 10:50:15.200 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 10:50:15.243 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.017s)
2023-12-08 10:50:15.243 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 10:50:15.253 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 10:50:15.255 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 10:50:15.387 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 10:50:15.469 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 10:50:15.716 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 10:50:15.877 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 10:50:16.062 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 10:50:16.102 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 10:50:17.118 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 10:50:17.127 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:50:17.896 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 10:50:18.560 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65871cfd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@723f8990, org.springframework.security.web.context.SecurityContextPersistenceFilter@8961e55, org.springframework.security.web.header.HeaderWriterFilter@674d2b8b, org.springframework.web.filter.CorsFilter@3bdc8975, org.springframework.security.web.authentication.logout.LogoutFilter@3013e1e8, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5058fefb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4197e859, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@758ac46, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27ea552d, org.springframework.security.web.session.SessionManagementFilter@6bc08a77, org.springframework.security.web.access.ExceptionTranslationFilter@3b72860c, org.springframework.security.web.access.intercept.AuthorizationFilter@7d381eae]
2023-12-08 10:50:18.803 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 10:50:18.821 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 10:50:18.832 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.139 seconds (JVM running for 6.989)
2023-12-08 10:50:26.662 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 10:50:26.664 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 10:50:26.665 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 10:50:26.734 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:26.734 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:26.806 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:26.806 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:27.614 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:27.614 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:27.626 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:27.632 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:29.856 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:29.866 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:29.872 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:29.877 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:29.958 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:29.968 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:30.108 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:30.118 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:33.191 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:33.203 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:33.212 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:33.215 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:37.137 [http-nio-8080-exec-5] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 10:50:37.137 [http-nio-8080-exec-5] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 10:50:37.139 [http-nio-8080-exec-5] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 10:50:37.145 [http-nio-8080-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 10:50:37.202 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:37.217 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:41.043 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:41.050 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:41.676 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:41.677 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:41.682 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:41.683 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:46.548 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:46.552 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:50.614 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:50.618 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:52.662 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:52.674 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:50:53.282 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:50:53.285 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:51:46.127 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:51:46.138 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:51:46.221 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:51:46.225 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:51:46.371 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:51:46.385 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:51:49.426 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:51:49.429 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:52:08.832 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 10:52:08.937 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - New ADMIN was created with username - morkovaka@ebaibl.yu
2023-12-08 10:52:12.758 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:52:12.761 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:52:15.587 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:52:15.588 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:52:15.597 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:52:15.599 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:54:34.220 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 10:54:34.304 [http-nio-8080-exec-5] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 10:55:00.462 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 10:55:00.496 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 10:55:01.468 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:55:01.473 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:55:05.206 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:55:05.218 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:55:26.655 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 10:55:26.662 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 10:59:59.804 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 10:59:59.864 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 10:59:59.891 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:15:47.022 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 6296 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:15:47.026 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:15:48.209 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:15:48.301 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 4 JPA repository interfaces.
2023-12-08 11:15:49.336 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:15:49.347 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:15:49.350 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:15:49.350 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:15:49.502 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:15:49.502 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2389 ms
2023-12-08 11:15:49.667 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:15:49.667 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:15:49.667 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:15:49.842 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:15:49.878 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.015s)
2023-12-08 11:15:49.878 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:15:49.886 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:15:49.888 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:15:50.000 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:15:50.056 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:15:50.231 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:15:50.338 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:15:50.398 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:15:50.428 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:15:51.298 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 11:15:51.307 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 11:15:52.052 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 11:15:52.643 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@50eae15a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bba2704, org.springframework.security.web.context.SecurityContextPersistenceFilter@2fd409c1, org.springframework.security.web.header.HeaderWriterFilter@401d83ce, org.springframework.web.filter.CorsFilter@5b5f61cc, org.springframework.security.web.authentication.logout.LogoutFilter@198a0416, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@12f12744, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3013e1e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cc2c4b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39179470, org.springframework.security.web.session.SessionManagementFilter@46ef7340, org.springframework.security.web.access.ExceptionTranslationFilter@5466a819, org.springframework.security.web.access.intercept.AuthorizationFilter@5ed463b7]
2023-12-08 11:15:52.891 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 11:15:52.916 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 11:15:52.929 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.548 seconds (JVM running for 7.42)
2023-12-08 11:16:25.913 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 11:16:25.913 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 11:16:25.915 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 11:16:58.638 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 11:16:58.680 [http-nio-8080-exec-6] ERROR r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl: register: 'username' InvalidLogin
2023-12-08 11:17:02.727 [http-nio-8080-exec-7] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [108] milliseconds.
2023-12-08 11:17:02.727 [http-nio-8080-exec-1] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [108] milliseconds.
2023-12-08 11:17:02.727 [http-nio-8080-exec-9] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [108] milliseconds.
2023-12-08 11:17:27.018 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:17:27.029 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:17:28.243 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:17:28.268 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:17:50.605 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:17:50.625 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:17:51.021 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:17:51.038 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:17:51.769 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:17:51.772 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:17:51.780 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:17:51.786 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:22:23.905 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:22:23.905 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:22:23.929 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:22:23.932 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:22:47.329 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 11:22:47.504 [http-nio-8080-exec-9] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - imail@imail.ru
2023-12-08 11:22:51.071 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:22:51.072 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:22:51.103 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:22:51.113 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:23:14.383 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:23:14.409 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:23:15.519 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:23:15.546 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:23:18.642 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:23:18.647 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:23:18.648 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:23:18.660 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:23:18.669 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:23:18.670 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:23:21.740 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:23:21.754 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:24:44.323 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:24:44.333 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:24:50.039 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:24:50.040 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:24:50.042 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:24:50.044 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:24:50.049 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:24:50.053 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:02.158 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:02.158 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:02.159 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:02.162 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:02.165 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:02.169 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:08.052 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:08.054 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:22.024 [http-nio-8080-exec-3] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 11:25:22.025 [http-nio-8080-exec-3] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(4) всё ещё есть ссылки в таблице "ad".
2023-12-08 11:25:22.030 [http-nio-8080-exec-3] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 11:25:22.083 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(4) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:25:22.116 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:22.117 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:22.121 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:22.124 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:24.568 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:24.570 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:24.574 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:24.590 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:25.251 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:25.252 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:25.252 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:25.256 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:25.258 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:25.258 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:35.716 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:35.755 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:35.755 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:35.764 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:39.725 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:39.729 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:43.222 [http-nio-8080-exec-10] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 11:25:43.222 [http-nio-8080-exec-10] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(4) всё ещё есть ссылки в таблице "ad".
2023-12-08 11:25:43.222 [http-nio-8080-exec-10] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 11:25:43.224 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(4) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:25:43.273 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:43.276 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:43.281 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:43.296 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:46.139 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:46.140 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:46.150 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:46.150 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:46.824 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:46.825 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:46.827 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:25:46.839 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:46.843 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:25:46.849 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:35:21.056 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 11:35:21.119 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:35:21.167 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:35:27.449 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23496 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:35:27.452 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:35:28.389 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:35:28.466 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 4 JPA repository interfaces.
2023-12-08 11:35:29.061 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:35:29.069 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:35:29.071 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:35:29.071 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:35:29.191 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:35:29.191 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1681 ms
2023-12-08 11:35:29.369 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:35:29.369 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:35:29.369 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:35:29.566 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:35:29.631 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.027s)
2023-12-08 11:35:29.631 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:35:29.640 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:35:29.642 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:35:29.777 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:35:29.862 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:35:30.082 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:35:30.216 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:35:30.293 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:35:30.339 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:35:30.559 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:35:30.559 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:35:30.559 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:35:30.605 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:35:30.607 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 11:35:30.618 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 11:35:30.635 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 11:36:14.167 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 3272 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:36:14.170 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:36:14.940 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:36:15.027 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 4 JPA repository interfaces.
2023-12-08 11:36:15.592 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:36:15.601 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:36:15.603 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:36:15.603 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:36:15.715 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:36:15.715 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1501 ms
2023-12-08 11:36:15.914 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:36:15.915 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:36:15.915 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:36:16.226 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:36:16.251 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.007s)
2023-12-08 11:36:16.252 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:36:16.265 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 11:36:16.319 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:36:16.320 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:36:16.440 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:36:16.520 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:36:16.744 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:36:16.880 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:36:16.950 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:36:16.990 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:36:17.198 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:36:17.199 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:36:17.199 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:36:17.223 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:36:17.225 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 11:36:17.239 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 11:36:17.259 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 11:37:09.837 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 18620 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:37:09.840 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:37:10.995 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:37:11.067 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 4 JPA repository interfaces.
2023-12-08 11:37:11.626 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:37:11.636 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:37:11.638 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:37:11.639 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:37:11.751 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:37:11.752 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1851 ms
2023-12-08 11:37:11.922 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:37:11.922 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:37:11.922 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:37:12.118 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:37:12.154 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.013s)
2023-12-08 11:37:12.154 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:37:12.173 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 11:37:12.233 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:37:12.234 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:37:12.362 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:37:12.440 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:37:12.687 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:37:12.809 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:37:12.873 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:37:12.911 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:37:13.110 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:37:13.111 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
2023-12-08 11:37:13.111 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:37:13.146 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:37:13.151 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 11:37:13.163 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 11:37:13.186 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.users in ru.skypro.homework.model.User.ads
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 11:38:06.696 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 20396 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:38:06.698 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:38:07.395 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:38:07.473 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2023-12-08 11:38:08.154 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:38:08.163 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:38:08.165 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:38:08.165 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:38:08.303 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:38:08.303 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1561 ms
2023-12-08 11:38:08.511 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:38:08.512 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:38:08.512 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:38:08.682 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:38:08.737 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.022s)
2023-12-08 11:38:08.737 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:38:08.749 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:38:08.751 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:38:08.883 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:38:08.949 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:38:09.161 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:38:09.273 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:38:09.348 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:38:09.394 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:38:09.606 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
2023-12-08 11:38:09.607 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
2023-12-08 11:38:09.607 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:38:09.620 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:38:09.623 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 11:38:09.634 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 11:38:09.656 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 11:51:29.606 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 24368 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:51:29.610 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:51:30.544 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:51:30.617 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 11:51:31.230 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:51:31.239 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:51:31.241 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:51:31.241 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:51:31.355 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:51:31.355 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1690 ms
2023-12-08 11:51:31.542 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:51:31.542 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:51:31.542 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:51:31.740 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:51:31.797 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.021s)
2023-12-08 11:51:31.797 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:51:31.807 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:51:31.809 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:51:31.935 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:51:32.028 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:51:32.275 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:51:32.389 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:51:32.569 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:51:32.601 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:51:32.792 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
2023-12-08 11:51:32.792 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
2023-12-08 11:51:32.793 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:51:32.836 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:51:32.838 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 11:51:32.849 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 11:51:32.871 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.ads
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 11:51:50.170 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 26452 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:51:50.172 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:51:50.891 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:51:50.985 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 4 JPA repository interfaces.
2023-12-08 11:51:51.485 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:51:51.492 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:51:51.493 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:51:51.494 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:51:51.591 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:51:51.592 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1376 ms
2023-12-08 11:51:51.738 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:51:51.738 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:51:51.738 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:51:51.882 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:51:51.909 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.011s)
2023-12-08 11:51:51.909 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:51:51.916 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:51:51.918 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:51:52.034 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:51:52.076 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:51:52.216 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:51:52.308 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:51:52.384 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:51:52.414 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:51:53.374 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 11:51:53.374 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 11:51:53.400 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 11:51:53.409 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 11:51:54.179 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 11:51:54.721 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@11a29c0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fc4b8d6, org.springframework.security.web.context.SecurityContextPersistenceFilter@7552f05b, org.springframework.security.web.header.HeaderWriterFilter@6484364f, org.springframework.web.filter.CorsFilter@77185a2, org.springframework.security.web.authentication.logout.LogoutFilter@79735611, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@61cff1e4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@322593ed, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@69e308e2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2dbc66f0, org.springframework.security.web.session.SessionManagementFilter@6889e714, org.springframework.security.web.access.ExceptionTranslationFilter@2c750b69, org.springframework.security.web.access.intercept.AuthorizationFilter@65a3d7c9]
2023-12-08 11:51:54.975 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 11:51:54.996 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 11:51:55.008 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.326 seconds (JVM running for 6.067)
2023-12-08 11:52:07.206 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 11:52:07.206 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 11:52:07.209 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 11:52:07.277 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:07.277 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:07.309 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:07.309 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:07.316 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:07.316 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:13.369 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:13.371 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:13.372 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:13.374 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:13.374 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:13.376 [http-nio-8080-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:14.220 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:14.221 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:14.223 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:14.223 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:52:14.224 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:14.224 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.skypro.homework.model.Image.getImage()" because "imageById" is null
	at ru.skypro.homework.service.impl.ImageServiceImpl.getById(ImageServiceImpl.java:48)
	at ru.skypro.homework.controller.AdController.getAdsImage(AdController.java:238)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:164)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 11:52:34.759 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 11:52:34.925 [http-nio-8080-exec-8] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 11:52:57.985 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:52:57.996 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:52:59.172 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:52:59.197 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:54:22.077 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 11:54:22.109 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 11:54:22.118 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 11:55:46.317 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 21624 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 11:55:46.320 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 11:55:47.416 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 11:55:47.539 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 4 JPA repository interfaces.
2023-12-08 11:55:48.393 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 11:55:48.405 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 11:55:48.407 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 11:55:48.407 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 11:55:48.558 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 11:55:48.559 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2158 ms
2023-12-08 11:55:49.008 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 11:55:49.009 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 11:55:49.009 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 11:55:49.490 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 11:55:49.715 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.065s)
2023-12-08 11:55:49.715 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 11:55:49.832 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 11:55:50.590 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 11:55:50.591 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 11:55:50.754 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 11:55:51.008 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 11:55:51.417 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 11:55:51.651 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 11:55:51.831 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 11:55:51.878 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 11:55:53.124 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 11:55:53.124 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 11:55:53.167 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 11:55:53.177 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 11:55:54.077 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 11:55:54.701 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@669e730d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b3e4253, org.springframework.security.web.context.SecurityContextPersistenceFilter@f31b991, org.springframework.security.web.header.HeaderWriterFilter@4c57ca10, org.springframework.web.filter.CorsFilter@13b5598b, org.springframework.security.web.authentication.logout.LogoutFilter@36570936, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bc8d8bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5183131d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@198a0416, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@141c66db, org.springframework.security.web.session.SessionManagementFilter@496004e3, org.springframework.security.web.access.ExceptionTranslationFilter@7d381eae, org.springframework.security.web.access.intercept.AuthorizationFilter@39179470]
2023-12-08 11:55:55.003 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 11:55:55.062 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 11:55:55.083 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 9.528 seconds (JVM running for 11.455)
2023-12-08 11:56:50.990 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 11:56:50.993 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 11:56:51.062 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 69 ms
2023-12-08 11:56:51.519 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 11:56:51.819 [http-nio-8080-exec-2] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - imail@imail.ru
2023-12-08 11:56:54.973 [http-nio-8080-exec-6] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [126] milliseconds.
2023-12-08 11:56:54.973 [http-nio-8080-exec-5] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [126] milliseconds.
2023-12-08 11:56:54.973 [http-nio-8080-exec-7] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [126] milliseconds.
2023-12-08 11:57:18.199 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:57:18.230 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:57:19.502 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:57:19.543 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:57:27.807 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:57:27.831 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:57:44.658 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 11:57:44.747 [http-nio-8080-exec-7] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 11:57:47.110 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:57:47.126 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 11:58:07.002 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 11:58:07.022 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 11:58:08.113 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 11:58:08.128 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:12.728 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 12:00:12.744 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 12:00:13.123 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:13.141 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:13.827 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:13.831 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:13.850 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:13.851 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:28.640 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:28.642 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:28.644 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:28.647 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:28.663 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:28.668 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:34.734 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:34.735 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:34.735 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:34.742 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:34.755 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:34.775 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:38.060 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:38.073 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:44.358 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:44.367 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:47.005 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:47.012 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:47.024 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:47.028 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:49.255 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:49.256 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:49.264 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:49.266 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:49.971 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:49.971 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:00:49.976 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:00:49.976 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:05.916 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:05.918 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:05.921 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:05.923 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:08.484 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:08.488 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:21.921 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:21.923 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:21.941 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:21.955 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:01:24.323 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:01:24.329 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:03.323 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:03.324 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:03.332 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:03.334 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:10.381 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:10.382 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:10.386 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:10.387 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:13.827 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:13.830 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:35.777 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:02:35.777 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
2023-12-08 12:02:35.784 [http-nio-8080-exec-4] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:02:35.829 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:02:35.933 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:35.936 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:38.146 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:38.153 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:38.788 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:38.789 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:38.792 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:38.800 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:42.466 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:42.468 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:42.472 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:42.475 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:50.329 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:50.332 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:53.190 [http-nio-8080-exec-10] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:02:53.190 [http-nio-8080-exec-10] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
2023-12-08 12:02:53.191 [http-nio-8080-exec-10] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:02:53.192 [http-nio-8080-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:02:53.208 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:53.214 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:55.343 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:55.349 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:56.007 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:56.009 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:02:56.012 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:02:56.017 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:06:23.918 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:06:23.952 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:06:23.978 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:20:12.596 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 17516 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:20:12.599 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:20:13.359 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:20:13.437 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 4 JPA repository interfaces.
2023-12-08 12:20:14.047 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:20:14.055 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:20:14.058 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:20:14.058 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:20:14.166 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:20:14.166 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1522 ms
2023-12-08 12:20:14.375 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:20:14.375 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:20:14.375 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:20:14.610 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:20:14.683 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.038s)
2023-12-08 12:20:14.683 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:20:14.694 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:20:14.697 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:20:14.843 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:20:14.927 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:20:15.156 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:20:15.294 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:20:15.361 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:20:15.399 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:20:16.276 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:20:16.286 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:20:17.059 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:20:17.677 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@47800bd7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c57ca10, org.springframework.security.web.context.SecurityContextPersistenceFilter@7747571c, org.springframework.security.web.header.HeaderWriterFilter@5f6ba085, org.springframework.web.filter.CorsFilter@212be8c, org.springframework.security.web.authentication.logout.LogoutFilter@7866fe3e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@77185a2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3f67f5ff, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@202fd4c4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fe21d0e, org.springframework.security.web.session.SessionManagementFilter@322593ed, org.springframework.security.web.access.ExceptionTranslationFilter@6c569caf, org.springframework.security.web.access.intercept.AuthorizationFilter@5abc488d]
2023-12-08 12:20:17.948 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:20:17.969 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:20:17.983 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.927 seconds (JVM running for 6.813)
2023-12-08 12:20:22.893 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 12:20:22.893 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 12:20:22.895 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 12:20:22.955 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:22.955 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:23.017 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:23.017 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:29.724 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:29.736 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:34.512 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:20:34.512 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
2023-12-08 12:20:34.515 [http-nio-8080-exec-1] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:20:34.525 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fkmea7pyuw3c1i7w8y0wljw1sy7" таблицы "comment"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:20:34.593 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:34.606 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:36.968 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:36.984 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:37.634 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:37.635 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:37.665 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:37.667 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:43.513 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:43.519 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:20:43.519 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:20:43.536 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:21:59.480 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:21:59.529 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:21:59.551 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:22:03.046 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23320 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:22:03.049 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:22:03.808 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:22:03.880 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 4 JPA repository interfaces.
2023-12-08 12:22:04.412 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:22:04.423 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:22:04.426 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:22:04.426 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:22:04.536 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:22:04.536 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1438 ms
2023-12-08 12:22:04.699 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:22:04.699 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:22:04.699 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:22:04.871 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:22:04.904 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 12:22:04.904 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:22:04.913 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:22:04.914 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:22:05.038 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:22:05.106 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:22:05.332 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:22:05.446 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:22:05.629 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:22:05.660 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:22:06.506 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:22:06.515 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:22:07.252 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:22:07.839 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fc4b8d6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@77185a2, org.springframework.security.web.context.SecurityContextPersistenceFilter@524418a2, org.springframework.security.web.header.HeaderWriterFilter@2ddb6c71, org.springframework.web.filter.CorsFilter@2dbc66f0, org.springframework.security.web.authentication.logout.LogoutFilter@758ac46, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@13f17b8f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67062a93, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f67f5ff, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d381eae, org.springframework.security.web.session.SessionManagementFilter@4dc5b887, org.springframework.security.web.access.ExceptionTranslationFilter@159a0f0e, org.springframework.security.web.access.intercept.AuthorizationFilter@5466a819]
2023-12-08 12:22:08.071 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:22:08.091 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:22:08.102 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.624 seconds (JVM running for 6.533)
2023-12-08 12:22:51.447 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:22:51.448 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:22:51.452 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:23:03.665 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 21552 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:23:03.668 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:23:04.431 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:23:04.497 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 4 JPA repository interfaces.
2023-12-08 12:23:05.026 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:23:05.037 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:23:05.038 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:23:05.038 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:23:05.146 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:23:05.146 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1430 ms
2023-12-08 12:23:05.284 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:23:05.285 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:23:05.285 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:23:05.454 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:23:05.488 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.015s)
2023-12-08 12:23:05.488 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:23:05.497 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:23:05.500 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:23:05.615 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:23:05.692 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:23:05.921 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:23:06.058 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:23:06.123 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:23:06.159 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:23:06.954 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:23:06.963 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:23:07.663 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:23:08.212 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30d944d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1c76b2fe, org.springframework.security.web.context.SecurityContextPersistenceFilter@26caf4b6, org.springframework.security.web.header.HeaderWriterFilter@5c8e7687, org.springframework.web.filter.CorsFilter@7fa2473a, org.springframework.security.web.authentication.logout.LogoutFilter@399a5a52, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@401d83ce, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c750b69, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@29f114e0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47629063, org.springframework.security.web.session.SessionManagementFilter@5776a9f8, org.springframework.security.web.access.ExceptionTranslationFilter@328e687e, org.springframework.security.web.access.intercept.AuthorizationFilter@307e9c02]
2023-12-08 12:23:08.428 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:23:08.448 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:23:08.458 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.298 seconds (JVM running for 7.682)
2023-12-08 12:23:13.645 [http-nio-8080-exec-6] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 12:23:13.646 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 12:23:13.647 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 12:23:13.712 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:13.712 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:13.771 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:13.771 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:14.584 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:14.584 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:14.601 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:14.605 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:15.350 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:15.350 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:15.368 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:15.369 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:28.218 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:28.219 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:23:28.231 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:23:28.232 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:16.718 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 12:24:16.735 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 12:24:17.828 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:17.833 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:25.138 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:25.140 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:25.140 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:25.142 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:25.158 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:25.162 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:30.133 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:30.133 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:30.133 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:30.138 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:30.138 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:30.141 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:34.476 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:34.480 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:40.891 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:40.892 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:40.898 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:40.900 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:44.076 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:44.079 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:44.079 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:24:44.083 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:44.084 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:24:44.088 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:09.901 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:09.918 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:20.551 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:20.553 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:20.553 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:20.558 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:20.560 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:20.560 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:28.099 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:28.099 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:28.099 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:28.105 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:28.107 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:28.108 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:34.043 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:34.046 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:34.052 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:34.052 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:39.753 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:39.753 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:39.753 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:39.757 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:39.758 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:39.758 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:44.862 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:44.864 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:44.865 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:44.870 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:44.874 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:44.875 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:46.475 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:46.480 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:55.505 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:55.509 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:59.294 [http-nio-8080-exec-9] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:25:59.295 [http-nio-8080-exec-9] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
2023-12-08 12:25:59.300 [http-nio-8080-exec-9] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:25:59.312 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:25:59.356 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:59.360 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:25:59.360 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:25:59.365 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:26:01.908 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:26:01.910 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:26:01.918 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:26:01.919 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:26:02.587 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:26:02.587 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:26:02.587 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:26:02.590 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:26:02.592 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:26:02.593 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:28:10.964 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:28:11.075 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:28:11.126 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:28:19.947 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 21632 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:28:19.949 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:28:20.921 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:28:20.989 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 4 JPA repository interfaces.
2023-12-08 12:28:21.542 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:28:21.550 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:28:21.552 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:28:21.553 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:28:21.664 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:28:21.664 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1670 ms
2023-12-08 12:28:21.850 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:28:21.850 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:28:21.850 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:28:22.070 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:28:22.128 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.022s)
2023-12-08 12:28:22.128 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:28:22.136 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:28:22.138 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:28:22.269 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:28:22.346 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:28:22.557 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:28:22.675 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:28:22.745 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:28:22.785 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:28:22.983 [main] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.adList
2023-12-08 12:28:22.984 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.adList
2023-12-08 12:28:22.984 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:28:23.026 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:28:23.028 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 12:28:23.041 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 12:28:23.062 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.adList
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1157)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ru.skypro.homework.model.Ad.user in ru.skypro.homework.model.User.adList
	at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875)
	at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826)
	at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 16 common frames omitted
2023-12-08 12:28:38.696 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 8848 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:28:38.699 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:28:39.406 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:28:39.476 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 4 JPA repository interfaces.
2023-12-08 12:28:40.022 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:28:40.028 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:28:40.030 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:28:40.030 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:28:40.137 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:28:40.137 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1380 ms
2023-12-08 12:28:40.316 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:28:40.316 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:28:40.316 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:28:40.496 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:28:40.551 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.023s)
2023-12-08 12:28:40.552 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:28:40.566 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:28:40.568 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:28:40.745 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:28:40.804 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:28:40.966 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:28:41.057 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:28:41.260 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:28:41.292 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:28:42.113 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:28:42.124 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:28:42.949 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:28:43.567 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@787b7796, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a0e35c3, org.springframework.security.web.context.SecurityContextPersistenceFilter@51b2b3e6, org.springframework.security.web.header.HeaderWriterFilter@22f0e329, org.springframework.web.filter.CorsFilter@1d7f0cd0, org.springframework.security.web.authentication.logout.LogoutFilter@65a3d7c9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4c57ca10, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@202fd4c4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@399a5a52, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@325a781c, org.springframework.security.web.session.SessionManagementFilter@69e308e2, org.springframework.security.web.access.ExceptionTranslationFilter@26f7b114, org.springframework.security.web.access.intercept.AuthorizationFilter@47629063]
2023-12-08 12:28:43.919 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:28:43.940 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:28:43.950 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.804 seconds (JVM running for 6.535)
2023-12-08 12:29:54.216 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 12:29:54.216 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 12:29:54.217 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 12:29:54.290 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:29:54.346 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:29:57.768 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:29:57.780 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:04.009 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:04.010 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:04.010 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:04.023 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:04.033 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:04.035 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:09.802 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:09.802 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:09.802 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:09.808 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:09.814 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:09.815 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:11.623 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:11.632 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:16.878 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:16.878 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:16.878 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:16.883 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:16.889 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:16.891 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:22.776 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:22.776 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:22.776 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:22.779 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:22.781 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:22.789 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:28.656 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:28.661 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:28.668 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:28.675 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:33.115 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:33.119 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:33.119 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:33.121 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:33.123 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:33.125 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:36.544 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:36.548 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:30:48.632 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:30:48.636 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:34.418 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:34.418 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:34.419 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:34.423 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:34.424 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:34.429 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:42.137 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:42.137 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:42.137 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:42.140 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:42.142 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:42.144 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:31:45.136 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:31:45.140 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:32:56.784 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:32:56.790 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:06.106 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:33:06.106 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
2023-12-08 12:33:06.113 [http-nio-8080-exec-4] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:33:06.149 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:104)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:33:06.253 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:06.261 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:06.265 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:06.270 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:11.466 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:11.466 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:11.473 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:11.473 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:12.157 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:12.157 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:12.174 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:33:12.175 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:12.176 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:33:12.178 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:39:19.419 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:39:19.484 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:39:19.517 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:39:32.775 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 4212 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:39:32.779 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:39:33.769 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:39:33.854 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2023-12-08 12:39:34.447 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:39:34.456 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:39:34.457 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:39:34.458 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:39:34.569 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:39:34.570 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1722 ms
2023-12-08 12:39:34.755 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:39:34.755 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:39:34.755 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:39:35.028 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:39:35.081 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.025s)
2023-12-08 12:39:35.082 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:39:35.089 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:39:35.090 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:39:35.200 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:39:35.278 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:39:35.480 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:39:35.595 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:39:35.655 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:39:35.689 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:39:36.545 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:39:36.556 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:39:37.403 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:39:37.970 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f5fb335, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@715d82a0, org.springframework.security.web.context.SecurityContextPersistenceFilter@38dc1c50, org.springframework.security.web.header.HeaderWriterFilter@4c51fc9a, org.springframework.web.filter.CorsFilter@299cddbf, org.springframework.security.web.authentication.logout.LogoutFilter@25630ede, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@701bd6e8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40f931ec, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a05cdc8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31beb0d0, org.springframework.security.web.session.SessionManagementFilter@7be9e9fc, org.springframework.security.web.access.ExceptionTranslationFilter@29f86630, org.springframework.security.web.access.intercept.AuthorizationFilter@230e163b]
2023-12-08 12:39:38.226 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:39:38.248 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:39:38.259 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.056 seconds (JVM running for 8.335)
2023-12-08 12:41:10.274 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 12:41:10.274 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 12:41:10.276 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 12:41:10.351 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:41:10.418 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:41:16.937 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:41:16.945 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:42:05.703 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s902ms231µs300ns).
2023-12-08 12:42:35.599 [http-nio-8080-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:42:35.600 [http-nio-8080-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
2023-12-08 12:42:35.619 [http-nio-8080-exec-8] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:42:35.655 [http-nio-8080-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(2) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:42:35.937 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:42:35.970 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:42:35.972 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:42:36.003 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:43:05.235 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=59s537ms922µs700ns).
2023-12-08 12:43:23.345 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:43:23.363 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 12:43:23.373 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 12:44:12.421 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23844 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 12:44:12.424 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 12:44:13.299 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 12:44:13.372 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 4 JPA repository interfaces.
2023-12-08 12:44:13.962 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 12:44:13.972 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 12:44:13.974 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 12:44:13.974 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 12:44:14.087 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 12:44:14.087 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1606 ms
2023-12-08 12:44:14.264 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 12:44:14.265 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 12:44:14.265 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 12:44:14.479 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 12:44:14.533 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.027s)
2023-12-08 12:44:14.533 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 12:44:14.541 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 12:44:14.542 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 12:44:14.679 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 12:44:14.759 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 12:44:14.945 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 12:44:15.072 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 12:44:15.138 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 12:44:15.172 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 12:44:16.051 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 12:44:16.063 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 12:44:16.794 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 12:44:17.362 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@212be8c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fe21d0e, org.springframework.security.web.context.SecurityContextPersistenceFilter@3f67f5ff, org.springframework.security.web.header.HeaderWriterFilter@26f7b114, org.springframework.web.filter.CorsFilter@787b7796, org.springframework.security.web.authentication.logout.LogoutFilter@6250d33c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7d381eae, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51b2b3e6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f1b2f07, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a0e35c3, org.springframework.security.web.session.SessionManagementFilter@5b4ce00, org.springframework.security.web.access.ExceptionTranslationFilter@5f6ba085, org.springframework.security.web.access.intercept.AuthorizationFilter@1c76b2fe]
2023-12-08 12:44:17.600 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 12:44:17.625 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 12:44:17.639 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.792 seconds (JVM running for 6.889)
2023-12-08 12:44:25.394 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 12:44:25.394 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 12:44:25.396 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 12:44:26.304 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:26.304 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:26.304 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:26.348 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:26.352 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:26.352 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:41.871 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:41.871 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:41.872 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:41.878 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:41.884 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:41.885 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:45.389 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:45.396 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:53.784 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:53.787 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:53.787 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:53.791 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:53.799 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:53.801 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:56.166 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:56.169 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:44:56.184 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:44:56.186 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:02.544 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:02.544 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:02.545 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:02.547 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:02.557 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:02.559 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:15.765 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 12:45:15.893 [http-nio-8080-exec-1] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.yu
2023-12-08 12:45:18.288 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:18.288 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:18.292 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:18.296 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:18.297 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:18.306 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:43.747 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 12:45:43.772 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 12:45:44.874 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:44.879 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:45:49.422 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:45:49.429 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:43.091 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:43.114 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:43.125 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:43.135 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:43.137 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:43.140 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:45.894 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:45.895 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:45.897 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:45.901 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:45.906 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:45.908 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:46.548 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:46.548 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:46.549 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:47:46.552 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:46.552 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:47:46.553 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:52.768 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 12:48:52.795 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 12:48:53.848 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:53.858 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:54.569 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:54.578 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:55.302 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:55.307 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:58.786 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:58.788 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:58.788 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:58.788 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:48:58.791 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:58.795 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:58.797 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:48:58.813 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:05.019 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:05.020 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:05.021 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:05.021 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:05.027 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:05.032 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:05.040 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:05.053 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:09.292 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:09.301 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:29.476 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:29.478 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:29.478 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:29.479 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:29.487 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:29.491 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:29.495 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:29.506 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:39.216 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:39.220 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:39.222 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:39.232 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:39.243 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:39.243 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:39.243 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:39.248 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:42.074 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:42.082 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:46.392 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:46.400 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:52.367 [http-nio-8080-exec-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 12:49:52.367 [http-nio-8080-exec-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 12:49:52.375 [http-nio-8080-exec-1] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 12:49:52.447 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 12:49:52.591 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:52.599 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:52.599 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:52.606 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:52.610 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:52.612 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:54.622 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:54.623 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:54.623 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:54.626 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:54.630 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:54.631 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:55.298 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:55.299 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:55.299 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:55.300 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 12:49:55.306 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:55.307 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:55.308 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 12:49:55.309 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:06:55.519 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:06:55.583 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:06:55.615 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:07:01.783 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 3820 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:07:01.790 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:07:02.674 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:07:02.746 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 13:07:03.340 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:07:03.349 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:07:03.351 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:07:03.351 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:07:03.465 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:07:03.466 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1630 ms
2023-12-08 13:07:03.666 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:07:03.666 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:07:03.666 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:07:03.894 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:07:03.954 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.024s)
2023-12-08 13:07:03.954 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:07:03.962 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:07:03.963 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:07:04.097 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:07:04.172 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:07:04.386 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:07:04.514 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:07:04.581 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:07:04.624 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:07:05.516 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:07:05.528 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:07:06.326 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:07:06.884 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2f0e7008, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@307e9c02, org.springframework.security.web.context.SecurityContextPersistenceFilter@d6879bf, org.springframework.security.web.header.HeaderWriterFilter@45f70f68, org.springframework.web.filter.CorsFilter@682270ff, org.springframework.security.web.authentication.logout.LogoutFilter@29a5f924, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7c9c7e7d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@318a81a0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@21fa19e4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bc08a77, org.springframework.security.web.session.SessionManagementFilter@623d222, org.springframework.security.web.access.ExceptionTranslationFilter@3ca5da54, org.springframework.security.web.access.intercept.AuthorizationFilter@4dc5b887]
2023-12-08 13:07:07.123 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:07:07.145 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:07:07.157 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.9 seconds (JVM running for 6.726)
2023-12-08 13:07:19.667 [http-nio-8080-exec-10] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:07:19.667 [http-nio-8080-exec-10] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:07:19.670 [http-nio-8080-exec-10] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 13:07:19.774 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:19.774 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:19.774 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:19.774 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:19.829 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:19.829 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:19.829 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:19.829 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:20.664 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:20.664 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:20.665 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:20.665 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:20.671 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:20.679 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:20.679 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:20.679 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:22.102 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:22.120 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:28.218 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:28.236 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:30.656 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 13:07:30.657 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 13:07:30.659 [http-nio-8080-exec-2] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 13:07:30.666 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:07:30.706 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:30.710 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:30.710 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:30.718 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:30.722 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:30.724 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:32.983 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:32.985 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:32.985 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:32.991 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.000 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.002 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.663 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:33.663 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:33.665 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:33.665 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:07:33.668 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.675 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.681 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:07:33.682 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:09:57.348 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:09:57.397 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:09:57.415 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:10:02.674 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 23900 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:10:02.676 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:10:03.494 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:10:03.567 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 13:10:04.142 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:10:04.152 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:10:04.153 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:10:04.153 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:10:04.265 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:10:04.265 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1536 ms
2023-12-08 13:10:04.447 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:10:04.447 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:10:04.447 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:10:04.623 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:10:04.657 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 13:10:04.657 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:10:04.667 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:10:04.668 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:10:04.807 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:10:04.893 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:10:05.110 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:10:05.220 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:10:05.280 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:10:05.316 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:10:06.135 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:10:06.145 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:10:06.892 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:10:07.421 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@703947bd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@f31b991, org.springframework.security.web.context.SecurityContextPersistenceFilter@7c9c7e7d, org.springframework.security.web.header.HeaderWriterFilter@7747571c, org.springframework.web.filter.CorsFilter@46bff388, org.springframework.security.web.authentication.logout.LogoutFilter@14af57c3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@cce672c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@951461a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6bc08a77, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5183131d, org.springframework.security.web.session.SessionManagementFilter@30b29f55, org.springframework.security.web.access.ExceptionTranslationFilter@67062a93, org.springframework.security.web.access.intercept.AuthorizationFilter@3013e1e8]
2023-12-08 13:10:07.645 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:10:07.665 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:10:07.676 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.609 seconds (JVM running for 6.34)
2023-12-08 13:10:13.816 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:10:13.816 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:10:13.820 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 13:10:13.905 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:13.905 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:13.905 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:13.905 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:13.964 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:13.964 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:13.964 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:13.964 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:14.782 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:14.782 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:14.782 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:14.782 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:14.790 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:14.799 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:14.799 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:14.800 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:17.501 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:17.512 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:19.501 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 13:10:19.501 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
2023-12-08 13:10:19.504 [http-nio-8080-exec-7] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 13:10:19.512 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "users" нарушает ограничение внешнего ключа "fk3dht79cwji9148p2ds4ytdwkg" таблицы "ad"
  Подробности: На ключ (id)=(1) всё ещё есть ссылки в таблице "ad".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy134.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:10:19.556 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:19.557 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:19.559 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:19.567 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:19.574 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:19.575 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:23.794 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:23.794 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:23.796 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:23.805 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:23.809 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:23.811 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:24.481 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:24.481 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:24.482 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:24.485 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:10:24.488 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:24.494 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:24.497 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:10:24.499 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:30.727 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:12:30.767 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:12:30.786 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:12:36.374 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 20336 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:12:36.376 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:12:37.159 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:12:37.242 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2023-12-08 13:12:37.863 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:12:37.872 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:12:37.874 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:12:37.874 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:12:37.983 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:12:37.984 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1555 ms
2023-12-08 13:12:38.156 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:12:38.156 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:12:38.156 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:12:38.329 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:12:38.363 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.015s)
2023-12-08 13:12:38.364 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:12:38.373 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:12:38.376 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:12:38.507 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:12:38.594 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:12:38.820 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:12:38.960 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:12:39.130 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:12:39.169 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:12:39.983 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:12:39.995 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:12:40.775 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:12:41.380 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@304704ae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c7607e5, org.springframework.security.web.context.SecurityContextPersistenceFilter@5e7ea81b, org.springframework.security.web.header.HeaderWriterFilter@73753326, org.springframework.web.filter.CorsFilter@533a27f8, org.springframework.security.web.authentication.logout.LogoutFilter@457d3f54, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4b2af0eb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7568134c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3c1d6ef0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7dd847a2, org.springframework.security.web.session.SessionManagementFilter@22349ad3, org.springframework.security.web.access.ExceptionTranslationFilter@752fecbf, org.springframework.security.web.access.intercept.AuthorizationFilter@32084a01]
2023-12-08 13:12:41.639 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:12:41.659 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:12:41.674 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.802 seconds (JVM running for 6.652)
2023-12-08 13:12:48.612 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:12:48.612 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:12:48.613 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 13:12:48.694 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:48.694 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:48.694 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:48.694 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:48.758 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:48.758 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:48.758 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:48.760 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:49.551 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:49.551 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:49.551 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:49.552 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:49.558 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:49.567 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:49.568 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:49.572 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:53.449 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:53.462 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:56.827 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 13:12:56.828 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
2023-12-08 13:12:56.830 [http-nio-8080-exec-4] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 13:12:56.838 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:12:56.890 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:56.892 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:56.892 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:56.900 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:56.907 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:56.909 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:59.433 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:59.433 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:59.434 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:12:59.446 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:59.452 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:12:59.453 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:13:00.111 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:13:00.112 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:13:00.112 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:13:00.113 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:13:00.114 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:13:00.124 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:13:00.125 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:13:00.126 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:15:54.264 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:15:54.277 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:15:54.287 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:15:59.667 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 25420 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:15:59.670 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:16:00.505 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:16:00.577 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 13:16:01.144 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:16:01.153 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:16:01.155 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:16:01.156 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:16:01.265 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:16:01.266 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1533 ms
2023-12-08 13:16:01.451 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:16:01.452 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:16:01.452 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:16:01.671 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:16:01.713 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.016s)
2023-12-08 13:16:01.713 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:16:01.721 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:16:01.722 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:16:01.847 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:16:01.926 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:16:02.117 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:16:02.234 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:16:02.296 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:16:02.328 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:16:03.245 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:16:03.255 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:16:04.025 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:16:04.596 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63e40188, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b3c2a9f, org.springframework.security.web.context.SecurityContextPersistenceFilter@1b08d26f, org.springframework.security.web.header.HeaderWriterFilter@53fd59d4, org.springframework.web.filter.CorsFilter@535b4dbf, org.springframework.security.web.authentication.logout.LogoutFilter@4e53c6ef, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@75d9b73c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@752fecbf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2eb73a42, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f571c0e, org.springframework.security.web.session.SessionManagementFilter@55731ccd, org.springframework.security.web.access.ExceptionTranslationFilter@50fe5df2, org.springframework.security.web.access.intercept.AuthorizationFilter@7b55f0a6]
2023-12-08 13:16:04.847 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:16:04.872 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:16:04.882 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.723 seconds (JVM running for 6.439)
2023-12-08 13:16:16.288 [http-nio-8080-exec-7] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:16:16.288 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:16:16.291 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 13:16:16.362 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:16.362 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:16.362 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:16.362 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:16.441 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:16.441 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:16.441 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:16.441 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:17.231 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:17.231 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:17.231 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:17.231 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:17.242 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:17.249 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:17.250 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:17.254 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:19.610 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:19.625 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:24.175 [http-nio-8080-exec-2] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 13:16:24.175 [http-nio-8080-exec-2] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
2023-12-08 13:16:24.177 [http-nio-8080-exec-2] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 13:16:24.186 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:16:24.230 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:24.232 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:24.232 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:24.240 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:24.246 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:24.247 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:33.543 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:33.546 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:33.546 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:33.555 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:33.561 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:33.562 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.226 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.227 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.228 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.237 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.239 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.247 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.892 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.892 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.894 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.895 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:16:54.899 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.904 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.909 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:16:54.912 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:01.465 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:01.469 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:06.374 [http-nio-8080-exec-7] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23503
2023-12-08 13:17:06.374 [http-nio-8080-exec-7] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
2023-12-08 13:17:06.374 [http-nio-8080-exec-7] INFO  o.h.e.j.b.internal.AbstractBatchImpl - HHH000010: On release of batch it still contained JDBC statements
2023-12-08 13:17:06.376 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause
org.postgresql.util.PSQLException: ОШИБКА: UPDATE или DELETE в таблице "ad" нарушает ограничение внешнего ключа "fkfugxpud1bmc3woul3fd7xdo7m" таблицы "comment"
  Подробности: На ключ (ad_id)=(6) всё ещё есть ссылки в таблице "comment".
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2675)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2365)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:355)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:490)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:408)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:167)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3698)
	at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3987)
	at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:123)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:729)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3303)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2438)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy132.deleteById(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:17:06.397 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:06.400 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:06.401 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:06.404 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:06.405 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:06.406 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:20.327 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:20.327 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:20.327 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:17:20.332 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:20.334 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:17:20.334 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:46.737 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 24888 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:18:46.739 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:18:47.448 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:18:47.528 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 72 ms. Found 4 JPA repository interfaces.
2023-12-08 13:18:48.080 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:18:48.089 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:18:48.090 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:18:48.090 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:18:48.199 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:18:48.199 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1413 ms
2023-12-08 13:18:48.357 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:18:48.357 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:18:48.357 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:18:48.560 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:18:48.594 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 13:18:48.594 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:18:48.602 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:18:48.604 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:18:48.718 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:18:48.807 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:18:49.024 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:18:49.153 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:18:49.222 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:18:49.259 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:18:50.055 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:18:50.066 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:18:50.789 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:18:51.303 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71e9640, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ce45e18, org.springframework.security.web.context.SecurityContextPersistenceFilter@6e475994, org.springframework.security.web.header.HeaderWriterFilter@3fc7abf6, org.springframework.web.filter.CorsFilter@25762f04, org.springframework.security.web.authentication.logout.LogoutFilter@6b60d99c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@762db992, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a99744a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@75d9b73c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2932721e, org.springframework.security.web.session.SessionManagementFilter@47cf922d, org.springframework.security.web.access.ExceptionTranslationFilter@8de8b07, org.springframework.security.web.access.intercept.AuthorizationFilter@24890021]
2023-12-08 13:18:51.527 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:18:51.545 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:18:51.555 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 5.291 seconds (JVM running for 6.236)
2023-12-08 13:18:57.944 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:18:57.944 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:18:57.945 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 13:18:58.024 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.024 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.024 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.081 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.080 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.080 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.864 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.864 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.865 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.868 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:18:58.873 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.880 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.883 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:18:58.892 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:36.917 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:24:36.983 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:24:37.024 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:24:42.905 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 20388 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:24:42.909 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:24:43.866 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:24:43.938 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 4 JPA repository interfaces.
2023-12-08 13:24:44.576 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:24:44.585 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:24:44.587 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:24:44.587 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:24:44.704 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:24:44.704 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1712 ms
2023-12-08 13:24:44.891 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:24:44.891 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:24:44.891 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:24:45.134 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:24:45.189 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.024s)
2023-12-08 13:24:45.189 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:24:45.201 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:24:45.203 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:24:45.373 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:24:45.456 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:24:45.765 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:24:45.922 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:24:45.995 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:24:46.036 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:24:46.934 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:24:46.944 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:24:47.750 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:24:48.429 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@66d73e2d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2433bcd4, org.springframework.security.web.context.SecurityContextPersistenceFilter@c770b57, org.springframework.security.web.header.HeaderWriterFilter@2daa5092, org.springframework.web.filter.CorsFilter@75d9b73c, org.springframework.security.web.authentication.logout.LogoutFilter@341c0dfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@55a2f08b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55731ccd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@565030b7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5f1a3c4, org.springframework.security.web.session.SessionManagementFilter@7fa86ddd, org.springframework.security.web.access.ExceptionTranslationFilter@5478597, org.springframework.security.web.access.intercept.AuthorizationFilter@59509393]
2023-12-08 13:24:48.712 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:24:48.745 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:24:48.760 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.407 seconds (JVM running for 7.207)
2023-12-08 13:24:50.617 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:24:50.617 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:24:50.619 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 13:24:50.699 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:50.699 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:50.699 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:50.699 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:50.758 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:50.758 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:50.758 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:50.758 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:51.548 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:51.548 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:51.548 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:51.549 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:51.556 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:51.564 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:51.564 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:51.565 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:54.159 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:54.169 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:57.512 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 02000
2023-12-08 13:24:57.512 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Запрос не вернул результатов.
2023-12-08 13:24:57.520 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet] with root cause
org.postgresql.util.PSQLException: Запрос не вернул результатов.
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:120)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
	at org.hibernate.loader.Loader.getResultSet(Loader.java:2322)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2075)
	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2037)
	at org.hibernate.loader.Loader.doQuery(Loader.java:956)
	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:357)
	at org.hibernate.loader.Loader.doList(Loader.java:2868)
	at org.hibernate.loader.Loader.doList(Loader.java:2850)
	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2682)
	at org.hibernate.loader.Loader.list(Loader.java:2677)
	at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)
	at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2186)
	at org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1204)
	at org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:177)
	at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)
	at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1665)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteCommentsByAdId(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:24:57.580 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:57.581 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:57.582 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:24:57.591 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:57.594 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:24:57.594 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:00.424 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:00.424 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:00.424 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:00.435 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:00.439 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:00.440 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:01.109 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:01.111 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:01.111 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:01.115 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:25:01.118 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:01.122 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:01.130 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:25:01.132 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:32:36.990 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:32:37.128 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:32:37.185 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:32:43.840 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 3272 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:32:43.843 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:32:44.841 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:32:44.926 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 4 JPA repository interfaces.
2023-12-08 13:32:45.726 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:32:45.738 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:32:45.740 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:32:45.740 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:32:45.955 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:32:45.955 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2041 ms
2023-12-08 13:32:46.235 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:32:46.235 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:32:46.235 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:32:46.532 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:32:46.571 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.018s)
2023-12-08 13:32:46.571 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:32:46.578 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:32:46.580 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:32:46.714 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:32:46.868 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:32:47.151 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:32:47.286 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:32:47.358 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:32:47.409 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:32:48.310 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:32:48.321 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:32:48.918 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 4; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.skypro.homework.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer); Reason: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
2023-12-08 13:32:48.919 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:32:48.920 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:32:48.923 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:32:48.925 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2023-12-08 13:32:48.940 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-08 13:32:48.965 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adController' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\controller\AdController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 4; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.skypro.homework.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer); Reason: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)
	at ru.skypro.homework.HomeworkApplication.main(HomeworkApplication.java:9)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adServiceImpl' defined in file [C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes\ru\skypro\homework\service\impl\AdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 4; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.skypro.homework.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer); Reason: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'commentRepository' defined in ru.skypro.homework.repository.CommentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer); Reason: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 33 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer); Reason: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!; nested exception is java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:107)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:95)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1061)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1921)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:97)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:87)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:87)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:365)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:323)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:231)
	at org.springframework.data.util.Lazy.get(Lazy.java:115)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:329)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 44 common frames omitted
Caused by: java.lang.IllegalStateException: Using named parameters for method public abstract void ru.skypro.homework.repository.CommentRepository.deleteComment(java.lang.Integer) but parameter 'Optional[id]' not found in annotated query 'DELETE FROM Comment c WHERE c.ad = :adId '!
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.assertParameterNamesInAnnotatedQuery(JpaQueryMethod.java:172)
	at org.springframework.data.jpa.repository.query.JpaQueryMethod.<init>(JpaQueryMethod.java:139)
	at org.springframework.data.jpa.repository.query.DefaultJpaQueryMethodFactory.build(DefaultJpaQueryMethodFactory.java:44)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:93)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:103)
	... 66 common frames omitted
2023-12-08 13:33:54.127 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 19672 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:33:54.130 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:33:54.958 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:33:55.030 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 4 JPA repository interfaces.
2023-12-08 13:33:55.663 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:33:55.672 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:33:55.674 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:33:55.674 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:33:55.800 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:33:55.801 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
2023-12-08 13:33:56.039 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:33:56.039 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:33:56.039 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:33:56.225 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:33:56.260 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.014s)
2023-12-08 13:33:56.261 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:33:56.270 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:33:56.272 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:33:56.408 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:33:56.456 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:33:56.630 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:33:56.724 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:33:56.982 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:33:57.014 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:33:57.819 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:33:57.829 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:33:58.660 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:33:59.323 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19ee0a2f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28796d0e, org.springframework.security.web.context.SecurityContextPersistenceFilter@7b55f0a6, org.springframework.security.web.header.HeaderWriterFilter@63218586, org.springframework.web.filter.CorsFilter@3cc548f6, org.springframework.security.web.authentication.logout.LogoutFilter@677274e7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@14b4b25e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1016b44e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fe37d27, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fed0c04, org.springframework.security.web.session.SessionManagementFilter@7ec75228, org.springframework.security.web.access.ExceptionTranslationFilter@2e2c9e24, org.springframework.security.web.access.intercept.AuthorizationFilter@6d387e9b]
2023-12-08 13:33:59.628 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:33:59.651 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:33:59.664 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.075 seconds (JVM running for 6.891)
2023-12-08 13:34:05.987 [http-nio-8080-exec-5] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:34:05.987 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:34:05.989 [http-nio-8080-exec-5] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 13:34:06.070 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:06.070 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:06.070 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:06.070 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:06.158 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:06.158 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:06.158 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:06.190 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:06.586 [http-nio-8080-exec-5] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [119] milliseconds.
2023-12-08 13:34:06.586 [http-nio-8080-exec-6] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [113] milliseconds.
2023-12-08 13:34:06.586 [http-nio-8080-exec-7] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [121] milliseconds.
2023-12-08 13:34:07.274 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:07.275 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:07.275 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:07.275 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:07.288 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:07.300 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:07.301 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:07.302 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:09.940 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:09.953 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:12.526 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]] with root cause
java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:54)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:27)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:90)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:55)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:501)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:122)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:335)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:149)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:82)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:74)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:96)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:101)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:233)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteComment(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:34:12.602 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:12.605 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:12.605 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:12.611 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:12.616 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:12.618 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:15.544 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:15.544 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:15.544 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:15.555 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:15.562 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:15.564 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:16.313 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:16.313 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:16.314 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:16.317 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:34:16.325 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:16.334 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:16.335 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:34:16.339 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:35:42.918 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:35:42.964 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:35:42.990 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:35:50.192 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 26244 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:35:50.195 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:35:51.197 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:35:51.295 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 4 JPA repository interfaces.
2023-12-08 13:35:52.097 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:35:52.116 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:35:52.120 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:35:52.121 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:35:52.297 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:35:52.298 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2029 ms
2023-12-08 13:35:52.508 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:35:52.509 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:35:52.509 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:35:52.703 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:35:52.748 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.020s)
2023-12-08 13:35:52.748 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:35:52.757 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:35:52.760 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:35:52.894 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:35:52.971 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:35:53.207 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:35:53.374 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:35:53.461 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:35:53.523 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:35:54.635 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:35:54.647 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:35:55.698 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:35:56.407 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1ce45e18, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25762f04, org.springframework.security.web.context.SecurityContextPersistenceFilter@55a2f08b, org.springframework.security.web.header.HeaderWriterFilter@1016b44e, org.springframework.web.filter.CorsFilter@2932721e, org.springframework.security.web.authentication.logout.LogoutFilter@543a7605, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@15a591d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@32084a01, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f1a3c4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a6d4dee, org.springframework.security.web.session.SessionManagementFilter@6b64921f, org.springframework.security.web.access.ExceptionTranslationFilter@7b55f0a6, org.springframework.security.web.access.intercept.AuthorizationFilter@613ba54e]
2023-12-08 13:35:56.676 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:35:56.703 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:35:56.717 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.169 seconds (JVM running for 8.072)
2023-12-08 13:36:02.917 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:36:02.918 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:36:02.919 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 13:36:04.408 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:04.447 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:07.274 [http-nio-8080-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]] with root cause
java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:54)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:27)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:90)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:55)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:501)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:122)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:335)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:149)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:82)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:74)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:96)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:101)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:233)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteComment(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:36:07.348 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:07.350 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:07.352 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:07.362 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:07.364 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:07.366 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.057 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.059 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.060 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.070 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.075 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.078 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.844 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.846 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.846 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.853 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:10.881 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.901 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.902 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:10.911 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:13.633 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:13.650 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:14.305 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:14.325 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:19.475 [http-nio-8080-exec-9] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]] with root cause
java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:54)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:27)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:90)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:55)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:501)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:122)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:335)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:149)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:82)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:74)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:96)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:101)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:233)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteComment(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:36:19.524 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:19.529 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:19.529 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:36:19.536 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:19.539 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:36:19.542 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:37:36.645 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:37:36.682 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:37:36.711 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:37:43.735 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 20400 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:37:43.739 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:37:44.744 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:37:44.830 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 4 JPA repository interfaces.
2023-12-08 13:37:45.454 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:37:45.464 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:37:45.465 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:37:45.466 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:37:45.601 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:37:45.602 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1772 ms
2023-12-08 13:37:45.912 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:37:45.912 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:37:45.912 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:37:46.231 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:37:46.344 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.048s)
2023-12-08 13:37:46.345 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:37:46.358 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:37:46.360 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:37:46.526 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:37:46.592 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:37:46.830 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:37:47.048 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:37:47.159 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:37:47.198 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:37:48.078 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:37:48.089 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:37:48.987 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:37:49.637 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19ee0a2f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28796d0e, org.springframework.security.web.context.SecurityContextPersistenceFilter@7b55f0a6, org.springframework.security.web.header.HeaderWriterFilter@63218586, org.springframework.web.filter.CorsFilter@3cc548f6, org.springframework.security.web.authentication.logout.LogoutFilter@677274e7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@14b4b25e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1016b44e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fe37d27, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fed0c04, org.springframework.security.web.session.SessionManagementFilter@7ec75228, org.springframework.security.web.access.ExceptionTranslationFilter@2e2c9e24, org.springframework.security.web.access.intercept.AuthorizationFilter@6d387e9b]
2023-12-08 13:37:49.913 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:37:49.944 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:37:49.957 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.848 seconds (JVM running for 7.753)
2023-12-08 13:37:59.056 [http-nio-8080-exec-6] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:37:59.056 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:37:59.058 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 13:38:00.615 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:00.642 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:01.097 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:01.109 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:01.109 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:01.114 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:01.121 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:01.126 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:01.137 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:01.144 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:04.716 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:04.734 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:08.953 [http-nio-8080-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]] with root cause
java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:54)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:27)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:90)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:55)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:501)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:122)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:335)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:149)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:82)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:74)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:96)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:101)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:233)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteComment(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:38:09.035 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:09.037 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:09.037 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:09.047 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:09.050 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:09.051 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:19.831 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:19.832 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:19.832 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:19.844 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:19.848 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:19.850 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:25.700 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:25.700 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:25.700 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:25.709 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:25.716 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:25.718 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:26.436 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:26.436 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:26.438 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:26.440 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:26.443 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:26.453 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:26.459 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:26.464 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:46.899 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:38:46.901 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:38:46.906 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:38:50.487 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 24892 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:38:50.490 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:38:51.276 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:38:51.347 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 13:38:51.963 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:38:51.976 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:38:51.977 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:38:51.977 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:38:52.119 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:38:52.119 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1575 ms
2023-12-08 13:38:52.293 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:38:52.294 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:38:52.294 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:38:52.520 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:38:52.561 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.016s)
2023-12-08 13:38:52.561 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:38:52.572 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:38:52.573 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:38:52.702 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:38:52.809 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:38:53.128 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:38:53.323 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:38:53.458 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:38:53.505 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:38:54.949 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:38:54.967 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:38:56.521 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:38:57.812 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3fed0c04, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@563bd6a4, org.springframework.security.web.context.SecurityContextPersistenceFilter@6c6c93f8, org.springframework.security.web.header.HeaderWriterFilter@507fecf3, org.springframework.web.filter.CorsFilter@3549c070, org.springframework.security.web.authentication.logout.LogoutFilter@1f7949dc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@19ee0a2f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a720ae3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41736818, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@235dacd7, org.springframework.security.web.session.SessionManagementFilter@7b55f0a6, org.springframework.security.web.access.ExceptionTranslationFilter@341c0dfc, org.springframework.security.web.access.intercept.AuthorizationFilter@533a27f8]
2023-12-08 13:38:58.472 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:38:58.497 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:38:58.514 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 8.58 seconds (JVM running for 9.584)
2023-12-08 13:38:58.786 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:38:58.787 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:38:58.791 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2023-12-08 13:38:58.892 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:58.892 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:58.892 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:58.892 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:38:58.955 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:58.955 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:58.955 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:38:58.955 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:17.299 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:17.321 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:22.232 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:22.247 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:24.016 [http-nio-8080-exec-8] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]] with root cause
java.lang.IllegalArgumentException: Parameter value [6] did not match expected type [ru.skypro.homework.model.Ad (n/a)]
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:54)
	at org.hibernate.query.spi.QueryParameterBindingValidator.validate(QueryParameterBindingValidator.java:27)
	at org.hibernate.query.internal.QueryParameterBindingImpl.validate(QueryParameterBindingImpl.java:90)
	at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:55)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:501)
	at org.hibernate.query.internal.AbstractProducedQuery.setParameter(AbstractProducedQuery.java:122)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:335)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:149)
	at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:126)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:82)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:74)
	at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:96)
	at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:101)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:233)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:198)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)
	at jdk.proxy2/jdk.proxy2.$Proxy137.deleteComment(Unknown Source)
	at ru.skypro.homework.service.impl.AdServiceImpl.removeAd(AdServiceImpl.java:103)
	at ru.skypro.homework.controller.AdController.removeAd(AdController.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:931)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:561)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at ru.skypro.homework.filter.BasicAuthCorsFilter.doFilterInternal(BasicAuthCorsFilter.java:22)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:196)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1623)
2023-12-08 13:39:24.108 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:24.125 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:24.130 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:24.133 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:24.143 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:24.145 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:31.239 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:31.239 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:31.239 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:39:31.245 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:31.251 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:39:31.259 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:22.856 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:22.856 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:22.856 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:22.983 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:22.988 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:22.997 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:24.828 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:24.837 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:24.841 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:24.841 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:24.845 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:40:24.852 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:24.857 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:40:24.860 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:54:13.374 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:54:13.417 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:54:13.440 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:55:34.586 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 4292 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:55:34.590 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:55:35.723 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:55:35.836 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 100 ms. Found 4 JPA repository interfaces.
2023-12-08 13:55:36.678 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:55:36.687 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:55:36.689 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:55:36.689 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:55:36.822 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:55:36.823 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2141 ms
2023-12-08 13:55:37.019 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:55:37.019 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:55:37.020 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:55:37.220 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:55:37.267 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.015s)
2023-12-08 13:55:37.267 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:55:37.298 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "public"."flyway_schema_history" ...
2023-12-08 13:55:37.397 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:55:37.399 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:55:37.614 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:55:37.698 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:55:37.926 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:55:38.088 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:55:38.163 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:55:38.211 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:55:39.161 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2023-12-08 13:55:39.162 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - ограничение "uk_r43af9ap4edm43mmtq01oddj6" в таблице "users" не существует, пропускается
2023-12-08 13:55:39.187 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:55:39.199 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:55:40.048 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:55:40.674 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1a67bde5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c648e38, org.springframework.security.web.context.SecurityContextPersistenceFilter@6e627ab8, org.springframework.security.web.header.HeaderWriterFilter@1fc4b8d6, org.springframework.web.filter.CorsFilter@6bc8d8bd, org.springframework.security.web.authentication.logout.LogoutFilter@43c64d6f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@106ac5f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@496004e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46bff388, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@395c21ee, org.springframework.security.web.session.SessionManagementFilter@113e6e06, org.springframework.security.web.access.ExceptionTranslationFilter@3cc2c4b8, org.springframework.security.web.access.intercept.AuthorizationFilter@1c618295]
2023-12-08 13:55:40.982 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:55:41.004 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:55:41.017 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.079 seconds (JVM running for 8.012)
2023-12-08 13:55:49.471 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:55:49.472 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 13:55:49.476 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 13:55:58.914 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 14692 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 13:55:58.917 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 13:55:59.734 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 13:55:59.816 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 4 JPA repository interfaces.
2023-12-08 13:56:00.401 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 13:56:00.411 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 13:56:00.412 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 13:56:00.412 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 13:56:00.534 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 13:56:00.535 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1563 ms
2023-12-08 13:56:00.724 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 13:56:00.725 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 13:56:00.725 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 13:56:00.911 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 13:56:00.952 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.018s)
2023-12-08 13:56:00.952 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 13:56:00.963 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 13:56:00.966 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 13:56:01.091 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 13:56:01.159 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 13:56:01.370 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 13:56:01.519 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 13:56:01.594 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 13:56:01.638 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 13:56:02.709 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 13:56:02.720 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 13:56:03.597 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 13:56:04.330 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3fe21d0e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@787b7796, org.springframework.security.web.context.SecurityContextPersistenceFilter@1c80f8dd, org.springframework.security.web.header.HeaderWriterFilter@209d0037, org.springframework.web.filter.CorsFilter@a0e35c3, org.springframework.security.web.authentication.logout.LogoutFilter@2a7b4bb6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@47800bd7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20e7152a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@674d2b8b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d7f0cd0, org.springframework.security.web.session.SessionManagementFilter@7747571c, org.springframework.security.web.access.ExceptionTranslationFilter@7e1ce99c, org.springframework.security.web.access.intercept.AuthorizationFilter@7fa2473a]
2023-12-08 13:56:04.675 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 13:56:04.709 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 13:56:04.726 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 6.391 seconds (JVM running for 7.227)
2023-12-08 13:56:13.758 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 13:56:13.758 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 13:56:13.760 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2023-12-08 13:56:24.289 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 13:56:24.549 [http-nio-8080-exec-5] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - imail@imail.ru
2023-12-08 13:56:27.414 [http-nio-8080-exec-2] WARN  o.a.c.util.SessionIdGeneratorBase - Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [109] milliseconds.
2023-12-08 13:56:56.394 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 13:56:56.414 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 13:56:57.529 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:56:57.555 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:56:58.173 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:56:58.185 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:00.801 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:00.823 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:14.184 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 13:57:14.298 [http-nio-8080-exec-4] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 13:57:17.570 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:17.592 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:25.780 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:25.793 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:27.908 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:27.928 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:38.367 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:38.376 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:47.457 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:47.478 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:49.718 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:49.723 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:57:52.437 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:57:52.445 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:59:51.496 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 13:59:51.536 [http-nio-8080-exec-7] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 13:59:52.443 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:59:52.499 [http-nio-8080-exec-5] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 13:59:56.945 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 13:59:56.965 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:00:32.280 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 14:00:32.489 [http-nio-8080-exec-8] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 14:00:35.418 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:00:35.429 [http-nio-8080-exec-4] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:01:25.786 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:01:25.885 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:01:35.486 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:01:35.503 [http-nio-8080-exec-1] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:01:45.733 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:01:45.866 [http-nio-8080-exec-8] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:01:48.129 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:01:48.158 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:01:52.177 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:01:52.202 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:05:02.333 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 14:05:02.458 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 14:05:02.532 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2023-12-08 14:06:02.024 [main] INFO  r.s.homework.HomeworkApplication - Starting HomeworkApplication using Java 20.0.1 on LAPTOP-T0PI7F2H with PID 19084 (C:\Users\Huawei\IdeaProjects\Shop\example-for-graduate-work-main\target\classes started by Huawei in C:\Users\Huawei\IdeaProjects\Shop)
2023-12-08 14:06:02.028 [main] INFO  r.s.homework.HomeworkApplication - No active profile set, falling back to 1 default profile: "default"
2023-12-08 14:06:03.243 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-08 14:06:03.323 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 71 ms. Found 4 JPA repository interfaces.
2023-12-08 14:06:04.126 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2023-12-08 14:06:04.137 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2023-12-08 14:06:04.139 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2023-12-08 14:06:04.139 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.79]
2023-12-08 14:06:04.292 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2023-12-08 14:06:04.293 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2191 ms
2023-12-08 14:06:04.520 [main] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 8.5.13 by Redgate
2023-12-08 14:06:04.520 [main] INFO  o.f.c.i.license.VersionPrinter - See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#8.5.13
2023-12-08 14:06:04.520 [main] INFO  o.f.c.i.license.VersionPrinter - 
2023-12-08 14:06:04.770 [main] INFO  o.f.c.i.d.base.BaseDatabaseType - Database: jdbc:postgresql://localhost:5432/shop.db (PostgreSQL 13.11)
2023-12-08 14:06:04.812 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 0 migrations (execution time 00:00.019s)
2023-12-08 14:06:04.812 [main] WARN  o.f.core.internal.command.DbValidate - No migrations found. Are your locations set up correctly?
2023-12-08 14:06:04.822 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": << Empty Schema >>
2023-12-08 14:06:04.823 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2023-12-08 14:06:05.022 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-08 14:06:05.115 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2023-12-08 14:06:05.366 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-08 14:06:05.575 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2023-12-08 14:06:05.650 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2023-12-08 14:06:05.692 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL10Dialect
2023-12-08 14:06:06.764 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-08 14:06:06.780 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 14:06:07.690 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-08 14:06:08.385 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@27ea552d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a57c5d9, org.springframework.security.web.context.SecurityContextPersistenceFilter@73072745, org.springframework.security.web.header.HeaderWriterFilter@30b29f55, org.springframework.web.filter.CorsFilter@742aa00a, org.springframework.security.web.authentication.logout.LogoutFilter@13f17b8f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@65871cfd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79735611, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a1e5fa7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2be208db, org.springframework.security.web.session.SessionManagementFilter@8961e55, org.springframework.security.web.access.ExceptionTranslationFilter@399a5a52, org.springframework.security.web.access.intercept.AuthorizationFilter@212be8c]
2023-12-08 14:06:08.669 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2023-12-08 14:06:08.719 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2023-12-08 14:06:08.748 [main] INFO  r.s.homework.HomeworkApplication - Started HomeworkApplication in 7.306 seconds (JVM running for 8.278)
2023-12-08 14:06:14.952 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-08 14:06:14.952 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2023-12-08 14:06:14.954 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2023-12-08 14:06:47.311 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->saveToDb
2023-12-08 14:06:47.327 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- saveToDo
2023-12-08 14:06:48.439 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:06:48.482 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:06:51.931 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:06:51.989 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:07.692 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.AuthServiceImpl - AuthServiceImpl:-> register
2023-12-08 14:07:07.889 [http-nio-8080-exec-2] ERROR r.s.h.service.impl.AuthServiceImpl - New USER was created with username - morkovaka@ebaibl.ru
2023-12-08 14:07:10.579 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:10.631 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:14.061 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:14.084 [http-nio-8080-exec-2] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:25.887 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:25.936 [http-nio-8080-exec-3] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:32.213 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:32.246 [http-nio-8080-exec-10] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:35.434 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:35.466 [http-nio-8080-exec-6] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:07:38.489 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : ->getById
2023-12-08 14:07:38.508 [http-nio-8080-exec-9] INFO  r.s.h.service.impl.ImageServiceImpl - ImageServiceImpl : <- getById
2023-12-08 14:09:40.332 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-08 14:09:40.401 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2023-12-08 14:09:40.429 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
